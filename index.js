(function(){"use strict";function L(){return window.panel}function D(){return L().api}function ve(){const r=D();return{load:({parent:t,name:e})=>r.get(`${t}/sections/${e}`)}}function Y(){return L().app.$store}const l=window.Vue,H=l.computed;l.customRef,l.defineAsyncComponent,l.defineComponent,l.effectScope,l.getCurrentInstance,l.getCurrentScope,l.h,l.inject,l.isProxy,l.isReactive,l.isReadonly,l.isRef,l.isShallow,l.markRaw;const be=l.nextTick;l.onActivated,l.onBeforeMount,l.onBeforeUnmount,l.onBeforeUpdate,l.onDeactivated,l.onErrorCaptured,l.onMounted,l.onRenderTracked,l.onRenderTriggered,l.onScopeDispose,l.onServerPrefetch,l.onUnmounted,l.onUpdated,l.provide,l.proxyRefs,l.reactive,l.readonly;const v=l.ref;l.shallowReactive,l.shallowReadonly,l.shallowRef,l.toRaw,l.toRef,l.toRefs,l.triggerRef;const J=l.unref;l.useAttrs,l.useCssModule,l.useCssVars,l.useListeners,l.useSlots;const _e=l.watch;l.watchEffect,l.watchPostEffect,l.watchSyncEffect;const Se={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function q(r,s,t,e,n,o,i,d){var a=typeof r=="function"?r.options:r;return s&&(a.render=s,a.staticRenderFns=t,a._compiled=!0),{exports:r,options:a}}const N={en:{"modal.info":"Thanks for purchasing {label}! Please enter your email address and order ID to activate your license.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Find your order number</a> on Lemon Squeezy or <a href="mailto:hello@kirby.tools">contact us</a> if you cannot find it.',"modal.error.required.fields":"Email address and order ID are required","modal.error.invalid.unauthorized":"Email address or order ID is incorrect","modal.error.invalid.licenseKey":"License key invalid for this plugin","modal.error.incompatible.licenseKey":"License key invalid for this plugin version","modal.error.registered":"License key already registered",activate:"Activate",activated:"Plugin activated"},de:{"modal.info":"Dankeschön für den Kauf von {label}! Bitte gib deine E-Mail-Adresse und Bestellnummer ein, um deine Lizenz zu aktivieren.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Finde deine Bestellnummer</a> bei Lemon Squeezy oder <a href="mailto:hello@kirby.tools">kontaktiere uns</a>, wenn du sie nicht finden kannst.',"modal.error.required.fields":"E-Mail-Adresse und Bestellnummer sind notwendig","modal.error.invalid.unauthorized":"E-Mail-Adresse oder Bestellnummer ist falsch","modal.error.invalid.licenseKey":"Lizenzschlüssel ungültig für dieses Plugin","modal.error.incompatible.licenseKey":"Lizenzschlüssel ungültig für diese Plugin-Version","modal.error.registered":"Lizenzschlüssel bereits registriert",activate:"Aktivieren",activated:"Plugin aktiviert"},fr:{"modal.info":"Merci d'avoir acheté {label} ! Veuillez saisir votre adresse e-mail et votre numéro de commande pour activer votre licence.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Trouvez votre numéro de commande</a> sur Lemon Squeezy ou <a href="mailto:hello@kirby.tools">contactez-nous</a> si vous ne le trouvez pas.',"modal.error.required.fields":"Adresse e-mail et numéro de commande requis","modal.error.invalid.unauthorized":"Adresse e-mail ou numéro de commande incorrect","modal.error.invalid.licenseKey":"Clé de licence invalide pour ce plugin","modal.error.incompatible.licenseKey":"Clé de licence invalide pour cette version du plugin","modal.error.registered":"Clé de licence déjà enregistrée",activate:"Activer",activated:"Plugin activé"}};function w(r,s,t){var i;const n=L().translation.code,o=((i=N==null?void 0:N[n])==null?void 0:i[r])??t;if(o)return s?Ae(o,s):o}function Ae(r,s,t){return r.replace(/\{(\w+)\}/g,(e,n)=>s[n]||n)}const ke=["localhost","127.0.0.1","[::1]"],we=["local","test","ddev.site"];function xe({label:r,apiNamespace:s}){const t=L(),e=D(),n=Re(),o=async(a,u)=>{if(!a||!u)throw new Error("Email and order ID are required");const f=await e.post(`${s}/register`,{email:a,orderId:u});if((f==null?void 0:f.status)!=="ok")throw new Error("Registration failed");return!0};return{isLocalhost:n,assertActivationIntegrity:async({component:a,licenseStatus:u})=>{if(J(u)==="active")return;await be();const f=J(a);if(!(f!=null&&f.$el)||window.getComputedStyle(f.$el).display==="none"||window.getComputedStyle(f.$el).visibility==="hidden"||window.getComputedStyle(f.$el).opacity==="0")throw new Error("Are you trying to hide the activation buttons? Please buy a license.")},openLicenseModal:()=>{let a=!1;return new Promise(u=>{t.dialog.open({component:"k-form-dialog",props:{submitButton:{icon:"check",theme:"love",text:w("activate",{label:r})},fields:{info:{type:"info",text:w("modal.info",{label:r})},email:{label:t.t("email"),type:"email"},orderId:{label:"Order ID",type:"text",help:w("modal.fields.orderId.help",{label:r})}}},on:{close:()=>{u({isRegistered:a})},submit:async f=>{const{email:g,orderId:c}=f;if(!g||!c){t.notification.error(w("modal.error.required.fields"));return}try{await o(g,Number(c))}catch(h){let y=h.message;y==="Unauthorized"?y=w("modal.error.invalid.unauthorized"):y==="License key not valid for this plugin"?y=w("modal.error.invalid.licenseKey"):y==="License key not valid for this plugin version"?y=w("modal.error.incompatible.licenseKey"):y==="License key already registered"&&(y=w("modal.error.registered")),t.notification.error(y);return}a=!0,t.dialog.close(),t.notification.success(w("activated"))}}})})}}}function Re(){const{hostname:r}=window.location,s=ke.includes(r),t=we.some(e=>r.endsWith(`.${e}`));return s||t}class Ee{constructor(){this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",2:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(s){return s<1?console.error:console.log}log(s){const t=this._getLogFn(s.level),e=s.type==="log"?"":s.type,n=s.tag||"",i=`
  background: ${this.typeColorMap[s.type]||this.levelColorMap[s.level]||this.defaultColor};
  border-radius: 0.5em;
  color: white;
  font-weight: bold;
  padding: 2px 0.5em;
`.trimStart(),d=`%c${[n,e].filter(Boolean).join(":")}`;typeof s.args[0]=="string"?t(`${d}%c ${s.args[0]}`,i,"",...s.args.slice(1)):t(d,i,...s.args)}}const Le={error:0,warn:1,info:2};function Ce(r){const s=new Ee;return new Proxy({},{get(t,e){return(...n)=>{s.log({level:Le[e],type:e,tag:r,args:n})}}})}let ze;function Z(){return ze??(ze=Ce("seo-audit"))}let M=[];const j=new Map;async function Be(r){if(!Array.isArray(r))throw new TypeError("Expected an array of assets");M.length>0||(M=r)}function Te(r){if(M.length===0)throw new Error("Plugin assets are not registered");const s=M.find(t=>t.filename===r);if(!s)throw new Error(`Plugin asset "${r}" not found`);return s}async function I(r){if(r.endsWith(".js")||(r+=".js"),j.has(r))return j.get(r);const t=await import(Te(r).url);return j.set(r,t),t}async function X(r){const s=await r;return s.default||s}var Q={};Object.defineProperty(Q,"__esModule",{value:!0});var U=Q.default={sentenceLength:{recommendedWordCount:20,slightlyTooMany:25,farTooMany:30},fleschReading:{borders:{veryEasy:90,easy:80,fairlyEasy:70,okay:60,fairlyDifficult:50,difficult:30,veryDifficult:0},scores:{veryEasy:9,easy:9,fairlyEasy:9,okay:9,fairlyDifficult:6,difficult:3,veryDifficult:3}}};const He=["TaxonomyTextLengthAssessment","UrlLengthAssessment","UrlStopWordsAssessment","SingleH1Assessment"],$e={FleschReadingEaseAssessment:"fleschReading",SentenceLengthInTextAssessment:"sentenceLength"},Oe=["FunctionWordsInKeyphraseAssessment","IntroductionKeywordAssessment","KeyphraseLengthAssessment","KeywordDensityAssessment","KeyphraseDistributionAssessment","MetaDescriptionKeywordAssessment","SubheadingsKeywordAssessment","TitleKeywordAssessment","UrlKeywordAssessment"],$=Object.freeze({af:"af-ZA",ar:"ar-SA",az:"az-Latn-AZ",be:"be-BY",bg:"bg-BG",ca:"ca-ES",cs:"cs-CZ",da:"da-DK",de:"de-DE",dv:"dv-MV",el:"el-GR",en:"en-US",es:"es-ES",et:"et-EE",eu:"eu-ES",fa:"fa-IR",fi:"fi-FI",fo:"fo-FO",fr:"fr-FR",gl:"gl-ES",gu:"gu-IN",he:"he-IL",hi:"hi-IN",hr:"hr-HR",hu:"hu-HU",hy:"hy-AM",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",ka:"ka-GE",kk:"kk-KZ",kn:"kn-IN",ko:"ko-KR",kok:"kok-IN",ky:"ky-KG",lt:"lt-LT",lv:"lv-LV",mk:"mk-MK",mn:"mn-MN",mr:"mr-IN",ms:"ms-MY",nl:"nl-NL",no:"nb-NO",pa:"pa-IN",pl:"pl-PL",pt:"pt-BR",ro:"ro-RO",ru:"ru-RU",sa:"sa-IN",sk:"sk-SK",sl:"sl-SI",sq:"sq-AL",sr:"sr-Latn-CS",sv:"sv-SE",sw:"sw-KE",syr:"syr-SY",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",tt:"tt-RU",uk:"uk-UA",ur:"ur-PK",uz:"uz-Latn-UZ",vi:"vi-VN"}),Me=["error","warn","info","debug"],Ie="kirby$seo-audit$",Fe={AltAttributeAssessment:{_label:"Alt-Attribut für Bilder",na:"Der Text enthält keine Bilder.",none:"Keines der {imagesWithoutAltAttribute} Bilder enthält ein Attribut für alternativen Text. Fügen Sie sie hinzu!",some:"Einige der {imagesWithoutAltAttribute} Bilder enthalten ein Attribut für alternativen Text. Fügen Sie sie hinzu!",every:"Alle Bilder enthalten ein Attribut für alternativen Text. Gute Arbeit!"},HeadingStructureOrderAssessment:{_label:"Reihenfolge der Überschriften",sequential:"Die Überschriftenstruktur ist in sequenzieller Reihenfolge. Gute Arbeit!",nonSequential:"Die Überschriftenstruktur ist nicht in sequenzieller Reihenfolge. Korrigieren Sie Ihre Überschriftenstruktur!"},SingleH1Assessment:{_label:"Einzelne H1",one:"Der Text enthält einen H1-Tag. Gute Arbeit!",multiple:"Der Text enthält mehrere H1-Tags. Überdenken Sie Ihre Überschriftenstruktur!",none:"Der Text enthält keinen H1-Tag. Fügen Sie ihn hinzu!"}},Pe={AltAttributeAssessment:{_label:"Image alt attribute",na:"The text doesn't contain any images.",none:"None of the {imagesWithoutAltAttribute} images contain an alternative text attribute. Add them!",some:"Some of the {imagesWithoutAltAttribute} images contain an alternative text attribute. Add them!",every:"All images contain an alternative text attribute. Good job!"},HeadingStructureOrderAssessment:{_label:"Heading structure",sequential:"The heading structure is in sequential order. Good job!",nonSequential:"The heading structure is not in sequential order. Fix your heading structure!"},SingleH1Assessment:{_label:"Single H1",one:"The text contains a single H1 tag. Good job!",multiple:"The text contains multiple H1 tags. Rethink your heading structure!",none:"The text contains no H1 tag. Add it!"}},Ke={AltAttributeAssessment:{_label:"Alt-tekst voor afbeeldingen",na:"De tekst bevat geen afbeeldingen.",none:"Geen van de {imagesWithoutAltAttribute} afbeeldingen bevat alt-tekst. Voeg ze toe!",some:"Sommige van de {imagesWithoutAltAttribute} afbeeldingen bevatten alt-tekst. Voeg ze toe!",every:"Alle afbeeldingen bevatten alt-tekst. Goed gedaan!"},HeadingStructureOrderAssessment:{_label:"Kopstructuur volgorde",sequential:"De kopstructuur is in opeenvolgende volgorde. Goed gedaan!",nonSequential:"De kopstructuur is niet in opeenvolgende volgorde. Corrigeer je kopstructuur!"},SingleH1Assessment:{_label:"Enkele H1",one:"De tekst bevat één H1-tag. Goed gedaan!",multiple:"De tekst bevat meerdere H1-tags. Herzie je kopstructuur!",none:"De tekst bevat geen H1-tag. Voeg er een toe!"}};function De({htmlDocument:r,contentSelector:s}){const e=[...r.querySelectorAll(s)].flatMap(n=>n.tagName.toLowerCase()==="h1"?[n]:[...n.querySelectorAll("h1")]);return{score:e.length===1?9:3,translation:e.length===1?"one":e.length>1?"multiple":"none"}}function qe({htmlDocument:r,contentSelector:s}){const e=[...r.querySelectorAll(s)].flatMap(i=>i.tagName.toLowerCase()==="img"?[i]:[...i.querySelectorAll("img")]);if(e.length===0)return{score:9,translation:"na"};const o=e.filter(i=>i.getAttribute("alt")===null).length;return{score:o===e.length||o>0?3:9,translation:o===e.length?"none":o>0?"some":"every",...o>0&&{context:{imagesWithoutAltAttribute:o}}}}function Ne({htmlDocument:r,contentSelector:s}){const e=[...r.querySelectorAll(s)].flatMap(d=>["h1","h2","h3","h4","h5","h6"].includes(d.tagName.toLowerCase())?[d]:[...d.querySelectorAll("h1, h2, h3, h4, h5, h6")]);let n=0;const o=[];for(const d of e){const a=Number.parseInt(d.tagName.substring(1),10);a-n>1&&o.push(d),n=a}const i=o.length===0;return{score:i?9:3,translation:i?"sequential":"nonSequential",...!i&&{details:{text:`<ul>${o.map(d=>`<li><strong>${d.tagName}</strong>: ${d.innerText}</li>`).join("")}</ul>`}}}}function ee(r,s,t){if(!r)return t;let e,n;if(Array.isArray(s)?e=[...s]:typeof s=="string"?e=s.split("."):typeof s=="symbol"&&(e=[s]),!Array.isArray(e))throw new TypeError(`Expected props to be an array, a string or a symbol, got ${typeof e}`);for(;e.length;)if(n=e.shift(),!r||(r=r[n],r===void 0))return t;return r}function je(r,s,t){return r.replace(/\{(\w+)\}/g,(e,n)=>s[n.toLowerCase()]||n)}const te={de:Fe,en:Pe,nl:Ke},Ue={seo:{AltAttributeAssessment:qe,HeadingStructureOrderAssessment:Ne,SingleH1Assessment:De}};function Ge({htmlDocument:r,contentSelector:s,assessments:t,locale:e}){const n=te[e]||te.en,o={};for(const[i,d]of Object.entries(Ue)){const a=[];for(const[u,f]of Object.entries(d)){if(t.length>0&&!t.includes(u.toLowerCase()))continue;const{score:g,translation:c,context:h={},details:y}=f({htmlDocument:r,contentSelector:s}),b=ee(n,`${u}.${c}`);if(!b)continue;const S=ee(n,`${u}._label`,u),k=Object.fromEntries(Object.entries(h).map(([R,_])=>[R.toLowerCase(),_]));a.push({score:g,rating:se(g),text:`${S}: ${je(b,k)}`,details:y})}o[i]=a}return o}async function We({htmlDocument:r,contentSelector:s,options:t,translations:e}){const n=await I("yoastseo"),{Jed:o}=await I("jed"),i=await X(I("string-pixel-width")),d=ne(r,s),a=new n.Paper(d,{keyword:t.keyword,synonyms:t.synonyms.join(","),url:new URL(t.url).pathname,permalink:t.url,title:t.title,titleWidth:t.title?i(t.title,{font:"arial",size:20}):void 0,description:t.description,locale:t.langCulture.replace("-","_")}),u=new n.Researcher(a),f=new o({domain:"js-text-analysis",locale_data:{"js-text-analysis":e||{"":{}}}}),g=Object.entries(n.assessments).reduce((c,[h,y])=>{for(const[b,S]of Object.entries(y))if(!He.includes(b)&&!(!t.keyword&&t.assessments.length===0&&Oe.includes(b))&&!(t.assessments.length>0&&!t.assessments.includes(b.toLowerCase()))){if(typeof S=="object"&&Object.prototype.hasOwnProperty.call(S,"getResult")){const k=S.getResult(a,u,f);c[h].push(k)}else if(typeof S=="function"){const k=$e[b],R=(U==null?void 0:U[k])||{},_=new S(R).getResult(a,u,f);c[h].push(_)}}return c},{seo:[],readability:[]});for(const c of Object.keys(g))g[c]=g[c].filter(h=>h.text).map(h=>({score:h.score,rating:se(h.score),text:h.text}));return g}function se(r){return r===-1?"error":r===0?"feedback":r<=4?"bad":r<=7?"ok":r>7?"good":""}async function Ve(r){var i,d,a;const t=new DOMParser().parseFromString(r,"text/html");for(const u of Array.from(t.body.querySelectorAll("script, style")))u.remove();let e=t.documentElement.lang??$.en;e.includes("-")||(e=($==null?void 0:$[e.toLowerCase()])??$.en);const n=t.title||((i=t.querySelector("h1"))==null?void 0:i.innerText)||((d=t.querySelector("h2"))==null?void 0:d.innerText)||"",o=((a=t.querySelector('meta[name="description"]'))==null?void 0:a.content)||"";return{htmlDocument:t,locale:e,title:n,description:o}}function ne(r,s){const t=r.querySelectorAll(s);return Array.from(t).map(e=>e.innerHTML).join(`
`)}function Ye(){const r=L(),s=Y();H(()=>s.getters["content/values"]());const t=Z();return{generateReport:async(n,o,i)=>{const d=await X(I("yoastseo-translations"));if(i.logLevel>1){o&&t.info("Content selector:",o);const c=n.querySelectorAll(o),h=ne(n,o);t.info("Selected elements:",c),t.info("Selected content:",h)}i.assessments=i.assessments.map(c=>{let h=c.toLowerCase();return h.endsWith("assessment")||(h+="assessment"),h});const a=r.translation.code,u={seo:[],readability:[]},f=Ge({htmlDocument:n,contentSelector:o,assessments:i.assessments,locale:a});for(const[c,h]of Object.entries(f))u[c]=u[c].concat(h);const g=await We({htmlDocument:n,contentSelector:o,options:i,translations:d[a]});for(const[c,h]of Object.entries(g))u[c]=u[c].concat(h);return u}}}const re=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function Je(r,s){s?s={...re,...s}:s=re;const t=oe(s);return t.dispatch(r),t.toString()}const Ze=Object.freeze(["prototype","__proto__","constructor"]);function oe(r){let s="",t=new Map;const e=n=>{s+=n};return{toString(){return s},getContext(){return t},dispatch(n){return r.replacer&&(n=r.replacer(n)),this[n===null?"null":typeof n](n)},object(n){if(n&&typeof n.toJSON=="function")return this.object(n.toJSON());const o=Object.prototype.toString.call(n);let i="";const d=o.length;d<10?i="unknown:["+o+"]":i=o.slice(8,d-1),i=i.toLowerCase();let a=null;if((a=t.get(n))===void 0)t.set(n,t.size);else return this.dispatch("[CIRCULAR:"+a+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(n))return e("buffer:"),e(n.toString("utf8"));if(i!=="object"&&i!=="function"&&i!=="asyncfunction")this[i]?this[i](n):r.ignoreUnknown||this.unkown(n,i);else{let u=Object.keys(n);r.unorderedObjects&&(u=u.sort());let f=[];r.respectType!==!1&&!ae(n)&&(f=Ze),r.excludeKeys&&(u=u.filter(c=>!r.excludeKeys(c)),f=f.filter(c=>!r.excludeKeys(c))),e("object:"+(u.length+f.length)+":");const g=c=>{this.dispatch(c),e(":"),r.excludeValues||this.dispatch(n[c]),e(",")};for(const c of u)g(c);for(const c of f)g(c)}},array(n,o){if(o=o===void 0?r.unorderedArrays!==!1:o,e("array:"+n.length+":"),!o||n.length<=1){for(const a of n)this.dispatch(a);return}const i=new Map,d=n.map(a=>{const u=oe(r);u.dispatch(a);for(const[f,g]of u.getContext())i.set(f,g);return u.toString()});return t=i,d.sort(),this.array(d,!1)},date(n){return e("date:"+n.toJSON())},symbol(n){return e("symbol:"+n.toString())},unkown(n,o){if(e(o),!!n&&(e(":"),n&&typeof n.entries=="function"))return this.array(Array.from(n.entries()),!0)},error(n){return e("error:"+n.toString())},boolean(n){return e("bool:"+n)},string(n){e("string:"+n.length+":"),e(n)},function(n){e("fn:"),ae(n)?this.dispatch("[native]"):this.dispatch(n.toString()),r.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(n.name)),r.respectFunctionProperties&&this.object(n)},number(n){return e("number:"+n)},xml(n){return e("xml:"+n.toString())},null(){return e("Null")},undefined(){return e("Undefined")},regexp(n){return e("regex:"+n.toString())},uint8array(n){return e("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},uint8clampedarray(n){return e("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},int8array(n){return e("int8array:"),this.dispatch(Array.prototype.slice.call(n))},uint16array(n){return e("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},int16array(n){return e("int16array:"),this.dispatch(Array.prototype.slice.call(n))},uint32array(n){return e("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},int32array(n){return e("int32array:"),this.dispatch(Array.prototype.slice.call(n))},float32array(n){return e("float32array:"),this.dispatch(Array.prototype.slice.call(n))},float64array(n){return e("float64array:"),this.dispatch(Array.prototype.slice.call(n))},arraybuffer(n){return e("arraybuffer:"),this.dispatch(new Uint8Array(n))},url(n){return e("url:"+n.toString())},map(n){e("map:");const o=[...n];return this.array(o,r.unorderedSets!==!1)},set(n){e("set:");const o=[...n];return this.array(o,r.unorderedSets!==!1)},file(n){return e("file:"),this.dispatch([n.name,n.size,n.type,n.lastModfied])},blob(){if(r.ignoreUnknown)return e("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return e("domwindow")},bigint(n){return e("bigint:"+n.toString())},process(){return e("process")},timer(){return e("timer")},pipe(){return e("pipe")},tcp(){return e("tcp")},udp(){return e("udp")},tty(){return e("tty")},statwatcher(){return e("statwatcher")},securecontext(){return e("securecontext")},connection(){return e("connection")},zlib(){return e("zlib")},context(){return e("context")},nodescript(){return e("nodescript")},httpparser(){return e("httpparser")},dataview(){return e("dataview")},signal(){return e("signal")},fsevent(){return e("fsevent")},tlswrap(){return e("tlswrap")}}}const ie="[native code] }",Xe=ie.length;function ae(r){return typeof r!="function"?!1:Function.prototype.toString.call(r).slice(-Xe)===ie}var Qe=Object.defineProperty,et=(r,s,t)=>s in r?Qe(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,z=(r,s,t)=>(et(r,typeof s!="symbol"?s+"":s,t),t);class x{constructor(s,t){z(this,"words"),z(this,"sigBytes"),s=this.words=s||[],this.sigBytes=t===void 0?s.length*4:t}toString(s){return(s||tt).stringify(this)}concat(s){if(this.clamp(),this.sigBytes%4)for(let t=0;t<s.sigBytes;t++){const e=s.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=e<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<s.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=s.words[t>>>2];return this.sigBytes+=s.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new x([...this.words])}}const tt={stringify(r){const s=[];for(let t=0;t<r.sigBytes;t++){const e=r.words[t>>>2]>>>24-t%4*8&255;s.push((e>>>4).toString(16),(e&15).toString(16))}return s.join("")}},st={stringify(r){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=[];for(let e=0;e<r.sigBytes;e+=3){const n=r.words[e>>>2]>>>24-e%4*8&255,o=r.words[e+1>>>2]>>>24-(e+1)%4*8&255,i=r.words[e+2>>>2]>>>24-(e+2)%4*8&255,d=n<<16|o<<8|i;for(let a=0;a<4&&e*8+a*6<r.sigBytes*8;a++)t.push(s.charAt(d>>>6*(3-a)&63))}return t.join("")}},nt={parse(r){const s=r.length,t=[];for(let e=0;e<s;e++)t[e>>>2]|=(r.charCodeAt(e)&255)<<24-e%4*8;return new x(t,s)}},rt={parse(r){return nt.parse(unescape(encodeURIComponent(r)))}};class ot{constructor(){z(this,"_data",new x),z(this,"_nDataBytes",0),z(this,"_minBufferSize",0),z(this,"blockSize",512/32)}reset(){this._data=new x,this._nDataBytes=0}_append(s){typeof s=="string"&&(s=rt.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes}_doProcessBlock(s,t){}_process(s){let t,e=this._data.sigBytes/(this.blockSize*4);s?e=Math.ceil(e):e=Math.max((e|0)-this._minBufferSize,0);const n=e*this.blockSize,o=Math.min(n*4,this._data.sigBytes);if(n){for(let i=0;i<n;i+=this.blockSize)this._doProcessBlock(this._data.words,i);t=this._data.words.splice(0,n),this._data.sigBytes-=o}return new x(t,o)}}class it extends ot{update(s){return this._append(s),this._process(),this}finalize(s){s&&this._append(s)}}var at=Object.defineProperty,lt=(r,s,t)=>s in r?at(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,ct=(r,s,t)=>(lt(r,s+"",t),t);const le=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ut=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],C=[];class dt extends it{constructor(){super(...arguments),ct(this,"_hash",new x([...le]))}reset(){super.reset(),this._hash=new x([...le])}_doProcessBlock(s,t){const e=this._hash.words;let n=e[0],o=e[1],i=e[2],d=e[3],a=e[4],u=e[5],f=e[6],g=e[7];for(let c=0;c<64;c++){if(c<16)C[c]=s[t+c]|0;else{const _=C[c-15],O=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,E=C[c-2],B=(E<<15|E>>>17)^(E<<13|E>>>19)^E>>>10;C[c]=O+C[c-7]+B+C[c-16]}const h=a&u^~a&f,y=n&o^n&i^o&i,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),S=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),k=g+S+h+ut[c]+C[c],R=b+y;g=f,f=u,u=a,a=d+k|0,d=i,i=o,o=n,n=k+R|0}e[0]=e[0]+n|0,e[1]=e[1]+o|0,e[2]=e[2]+i|0,e[3]=e[3]+d|0,e[4]=e[4]+a|0,e[5]=e[5]+u|0,e[6]=e[6]+f|0,e[7]=e[7]+g|0}finalize(s){super.finalize(s);const t=this._nDataBytes*8,e=this._data.sigBytes*8;return this._data.words[e>>>5]|=128<<24-e%32,this._data.words[(e+64>>>9<<4)+14]=Math.floor(t/4294967296),this._data.words[(e+64>>>9<<4)+15]=t,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function ft(r){return new dt().finalize(r).toString(st)}function ht(r,s={}){const t=typeof r=="string"?r:Je(r,s);return ft(t).slice(0,10)}function pt(...r){return`${Ie}${ht([...r])}`}const gt={__name:"SeoRatingBubble",props:{rating:{type:String,required:!0}},setup(r){return{__sfc:!0,colorMap:{good:"green",ok:"orange",bad:"red"}}}};var mt=function(){var s=this,t=s._self._c,e=s._self._setupProxy;return t("div",{staticClass:"ksr-mt-[0.375em] ksr-h-[12px] ksr-w-[12px] ksr-rounded-full",style:{backgroundColor:`var(--color-${e.colorMap[s.rating]??"gray"}-600)`}},[t("span",{staticClass:"ksr-sr-only"},[s._v(s._s(s.rating))])])},yt=[],vt=q(gt,mt,yt);const bt=vt.exports,_t={__name:"SeoResultEntry",props:{result:{type:Object,required:!0},links:{type:Boolean,default:!0}},setup(r){const s=r,t=L(),e=H(()=>{const o=s.result.text.replace(/!$/,".");return s.links?o:n(o)});function n(o){return new DOMParser().parseFromString(o,"text/html").body.textContent||""}return{__sfc:!0,props:s,panel:t,parseText:e,stripTags:n,SeoRatingBubble:bt}}};var St=function(){var s=this,t=s._self._c,e=s._self._setupProxy;return t("div",{staticClass:"ksr-flex ksr-items-start ksr-gap-2"},[t(e.SeoRatingBubble,{staticClass:"ksr-mx-1 ksr-shrink-0",attrs:{rating:s.result.rating}}),t("div",[t("div",{domProps:{innerHTML:s._s(e.parseText)}}),s.result.details?t("details",[t("summary",[s._v(s._s(e.panel.t("johannschopplich.seo-audit.issues")))]),t("div",{staticClass:"ksr-mb-1 ksr-rounded-[var(--rounded)] ksr-bg-[var(--color-border)] ksr-py-0.5",domProps:{innerHTML:s._s(s.result.details.text)}})]):s._e()])],1)},At=[],kt=q(_t,St,At);const wt=kt.exports,ce={...Se},xt=Object.assign({inheritAttrs:!1},{__name:"SeoAudit",props:ce,setup(r){const s=r,t=L(),e=D(),n=Y(),o=Z(),{generateReport:i}=Ye(),{openLicenseModal:d,assertActivationIntegrity:a}=xe({label:"Kirby SEO Audit",apiNamespace:"__seo-audit__"}),u=pt(t.view.path);let f;const g=v(),c=v(),h=v(),y=v(),b=v(),S=v(),k=v(),R=v(),_=v(),O=v(),E=v(),B=v(),ue=v(!1),G=v(!1),de=v(),F=v(),W=H(()=>n.getters["content/values"]()),fe=H(()=>c.value||W.value[h.value]||""),he=H(()=>{if(!y.value&&!b.value)return[];const p=y.value||W.value[b.value];return Array.isArray(p)?p:typeof p=="string"?p.split(",").map(A=>A.trim()):[]});_e(()=>t.language.code,()=>{V()}),V(!0);const{format:zt}=new Intl.DateTimeFormat(t.translation.code.replace("_","-"),{dateStyle:"short",timeStyle:"short"});async function V(p=!1){const{load:A}=ve(),m=await A({parent:s.parent,name:s.name});if(p){if(g.value=pe(m.label)||t.t("johannschopplich.seo-audit.label"),h.value=m.keyphraseField,b.value=m.synonymsField,S.value=m.assessments,k.value=m.contentSelector,R.value=m.links,_.value=m.persisted,O.value=Me.indexOf(m.config.logLevel??m.logLevel),E.value=m.config,B.value=m.license,Be(m.assets),_.value){const P=JSON.parse(localStorage.getItem(u));P&&(F.value=P)}ue.value=!0,a({component:de,licenseStatus:B.value})}c.value=m.keyphrase,y.value=m.synonyms,f=(await e.get(t.view.path,{select:"previewUrl"})).previewUrl}function pe(p){return!p||typeof p=="string"?p:p[t.translation.code]??Object.values(p)[0]}async function Bt(){if(!f){t.notification.error(t.t("johannschopplich.seo-audit.error.missingPreviewUrl"));return}const p=f;t.isLoading=!0,G.value=!0;try{const A=await me(p),{htmlDocument:m,locale:T,title:P,description:Ht}=await Ve(A),K=await i(m,k.value,{assessments:S.value,logLevel:O.value,url:p,title:P,description:Ht,langCulture:T,keyword:fe.value,synonyms:he.value});for(const ye of Object.keys(K))K[ye]=ge(K[ye]);F.value={result:K,timestamp:Date.now()},_.value&&localStorage.setItem(u,JSON.stringify(F.value))}catch(A){console.error(A),t.notification.error(t.t("johannschopplich.seo-audit.analyze.error"))}t.isLoading=!1,G.value=!1,t.notification.success({icon:"check",message:t.t("johannschopplich.seo-audit.analyze.success")})}function ge(p){return p.toSorted((A,m)=>A.rating==="feedback"?-1:m.rating==="feedback"?1:A.score<m.score?-1:1)}async function me(p){if(location.origin===new URL(p).origin){const T=await fetch(p);return T.ok||o.warn(`Response status code ${T.status} for URL ${p} is an indication that the error page is being analyzed.`),await T.text()}const{code:A,html:m}=await e.post("__seo-audit__/proxy",{url:p});return A!==200&&o.warn(`Response status code ${A} for URL ${p} is an indication that the error page is being analyzed.`),m}async function Tt(){const{isRegistered:p}=await d();p&&(B.value="active")}return{__sfc:!0,propsDefinition:ce,props:s,panel:t,api:e,store:n,logger:o,generateReport:i,openLicenseModal:d,assertActivationIntegrity:a,storageKey:u,previewUrl:f,label:g,keyphrase:c,keyphraseField:h,synonyms:y,synonymsField:b,assessments:S,contentSelector:k,links:R,persisted:_,logLevel:O,config:E,license:B,isInitialized:ue,isGenerating:G,licenseButtonGroup:de,report:F,currentContent:W,resolvedKeyphrase:fe,resolvedSynonyms:he,format:zt,updateSectionData:V,t:pe,analyze:Bt,sortResults:ge,fetchHtml:me,handleRegistration:Tt,SeoResultEntry:wt}}});var Rt=function(){var s=this,t=s._self._c,e=s._self._setupProxy;return e.isInitialized?t("k-section",{attrs:{label:e.label}},[e.license!=="active"?t("k-button-group",{ref:"licenseButtonGroup",attrs:{slot:"options",layout:"collapsed"},slot:"options"},[t("k-button",{attrs:{theme:"love",variant:"filled",size:"xs",link:"https://kirbyseo.com/buy",target:"_blank",text:e.panel.t("johannschopplich.seo-audit.license.buy")}}),t("k-button",{attrs:{theme:"love",variant:"filled",size:"xs",icon:"key",text:e.panel.t("johannschopplich.seo-audit.license.activate")},on:{click:function(n){return e.handleRegistration()}}})],1):s._e(),t("div",{staticClass:"ksr-space-y-4"},[t("k-button-group",{attrs:{layout:"collapsed"}},[t("k-button",{attrs:{icon:e.isGenerating?"loader":"seo-audit-analyze",text:e.panel.t("johannschopplich.seo-audit.analyze"),variant:"filled",size:"sm",theme:"positive",disabled:e.isGenerating},on:{click:function(n){return e.analyze()}}})],1),e.report?t("div",[t("k-box",{class:[e.isGenerating&&"ksr-cusor-wait ksr-pointer-events-none ksr-animate-pulse"],staticStyle:{"--link-color":"var(--color-text)"},attrs:{theme:"passive"}},[t("k-text",{staticClass:"ksr-space-y-4",class:[e.isGenerating&&"ksr-opacity-50"]},[e.report.result.seo.length>0?t("div",s._l(e.report.result.seo,function(n,o){return t("div",{key:o},[t(e.SeoResultEntry,{attrs:{result:n,links:e.links}})],1)}),0):s._e(),e.report.result.readability.length>0?t("div",[t("k-label",{staticClass:"ksr-mb-1",style:{color:"var(--color-text)"}},[s._v(" "+s._s(e.panel.t("johannschopplich.seo-audit.readability"))+" ")]),s._l(e.report.result.readability,function(n,o){return t("div",{key:o},[t(e.SeoResultEntry,{attrs:{result:n,links:e.links}})],1)})],2):s._e()])],1),t("k-box",{staticClass:"ksr-border-transparent",attrs:{theme:"empty",icon:"clock"}},[s._v(" "+s._s(e.format(e.report.timestamp))+" ")])],1):s._e()],1)],1):s._e()},Et=[],Lt=q(xt,Rt,Et);const Ct=Lt.exports;window.panel.plugin("johannschopplich/seo-audit",{sections:{"seo-audit":Ct},icons:{"seo-audit-analyze":'<path d="M8 3a7 7 0 0 0 0 14h1.07a7.06 7.06 0 0 1 0-2H8A5 5 0 0 1 8 5h8a5 5 0 0 1 4.9 6a7.021 7.021 0 0 1 1.426 2A7 7 0 0 0 16 3zm8 10a3 3 0 1 0 0 6a3 3 0 0 0 0-6m-5 3a5 5 0 1 1 9.172 2.757l2.535 2.536l-1.414 1.414l-2.536-2.535A5 5 0 0 1 11 16" />'}})})();
