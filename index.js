(function(){"use strict";function R(){return window.panel}function D(){return R().api}function Se(){const r=D();return{load:({parent:t,name:e})=>r.get(`${t}/sections/${e}`)}}function Y(){return R().app.$store}const l=window.Vue,O=l.computed;l.customRef,l.defineAsyncComponent,l.defineComponent,l.effectScope,l.getCurrentInstance,l.getCurrentScope,l.h,l.inject,l.isProxy,l.isReactive,l.isReadonly,l.isRef,l.isShallow,l.markRaw;const Ae=l.nextTick;l.onActivated,l.onBeforeMount,l.onBeforeUnmount,l.onBeforeUpdate,l.onDeactivated,l.onErrorCaptured,l.onMounted,l.onRenderTracked,l.onRenderTriggered,l.onScopeDispose,l.onServerPrefetch,l.onUnmounted,l.onUpdated,l.provide,l.proxyRefs,l.reactive,l.readonly;const b=l.ref;l.shallowReactive,l.shallowReadonly,l.shallowRef,l.toRaw,l.toRef,l.toRefs,l.triggerRef;const J=l.unref;l.useAttrs,l.useCssModule,l.useCssVars,l.useListeners,l.useSlots;const ke=l.watch;l.watchEffect,l.watchPostEffect,l.watchSyncEffect;const we={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function K(r,s,t,e,n,o,i,d){var a=typeof r=="function"?r.options:r;return s&&(a.render=s,a.staticRenderFns=t,a._compiled=!0),{exports:r,options:a}}const N={en:{"modal.info":"Thanks for purchasing {label}! Please enter your email address and order ID to activate your license.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Find your order number</a> on Lemon Squeezy or <a href="mailto:hello@kirby.tools">contact us</a> if you cannot find it.',"modal.error.required.fields":"Email address and order ID are required","modal.error.invalid.unauthorized":"Email address or order ID is incorrect","modal.error.invalid.licenseKey":"License key invalid for this plugin","modal.error.incompatible.licenseKey":"License key invalid for this plugin version","modal.error.registered":"License key already registered",activate:"Activate",activated:"Plugin activated"},de:{"modal.info":"Dankeschön für den Kauf von {label}! Bitte gib deine E-Mail-Adresse und Bestellnummer ein, um deine Lizenz zu aktivieren.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Finde deine Bestellnummer</a> bei Lemon Squeezy oder <a href="mailto:hello@kirby.tools">kontaktiere uns</a>, wenn du sie nicht finden kannst.',"modal.error.required.fields":"E-Mail-Adresse und Bestellnummer sind notwendig","modal.error.invalid.unauthorized":"E-Mail-Adresse oder Bestellnummer ist falsch","modal.error.invalid.licenseKey":"Lizenzschlüssel ungültig für dieses Plugin","modal.error.incompatible.licenseKey":"Lizenzschlüssel ungültig für diese Plugin-Version","modal.error.registered":"Lizenzschlüssel bereits registriert",activate:"Aktivieren",activated:"Plugin aktiviert"},fr:{"modal.info":"Merci d'avoir acheté {label} ! Veuillez saisir votre adresse e-mail et votre numéro de commande pour activer votre licence.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Trouvez votre numéro de commande</a> sur Lemon Squeezy ou <a href="mailto:hello@kirby.tools">contactez-nous</a> si vous ne le trouvez pas.',"modal.error.required.fields":"Adresse e-mail et numéro de commande requis","modal.error.invalid.unauthorized":"Adresse e-mail ou numéro de commande incorrect","modal.error.invalid.licenseKey":"Clé de licence invalide pour ce plugin","modal.error.incompatible.licenseKey":"Clé de licence invalide pour cette version du plugin","modal.error.registered":"Clé de licence déjà enregistrée",activate:"Activer",activated:"Plugin activé"}};function w(r,s,t){var i;const n=R().translation.code,o=((i=N==null?void 0:N[n])==null?void 0:i[r])??t;if(o)return s?xe(o,s):o}function xe(r,s,t){return r.replace(/\{(\w+)\}/g,(e,n)=>s[n]||n)}const Le=["localhost","127.0.0.1","[::1]"],Ee=["local","test","ddev.site"];function Re({label:r,apiNamespace:s}){const t=R(),e=D(),n=Ce(),o=async(a,c)=>{if(!a||!c)throw new Error("Email and order ID are required");const f=await e.post(`${s}/register`,{email:a,orderId:c});if((f==null?void 0:f.status)!=="ok")throw new Error("Registration failed");return!0};return{isLocalhost:n,assertActivationIntegrity:async({component:a,licenseStatus:c})=>{if(J(c)==="active")return;await Ae();const f=J(a);if(!(f!=null&&f.$el)||window.getComputedStyle(f.$el).display==="none"||window.getComputedStyle(f.$el).visibility==="hidden"||window.getComputedStyle(f.$el).opacity==="0")throw new Error("Are you trying to hide the activation buttons? Please buy a license.")},openLicenseModal:()=>{let a=!1;return new Promise(c=>{t.dialog.open({component:"k-form-dialog",props:{submitButton:{icon:"check",theme:"love",text:w("activate",{label:r})},fields:{info:{type:"info",text:w("modal.info",{label:r})},email:{label:t.t("email"),type:"email"},orderId:{label:"Order ID",type:"text",help:w("modal.fields.orderId.help",{label:r})}}},on:{close:()=>{c({isRegistered:a})},submit:async f=>{const{email:m,orderId:u}=f;if(!m||!u){t.notification.error(w("modal.error.required.fields"));return}try{await o(m,Number(u))}catch(p){let h=p.message;h==="Unauthorized"?h=w("modal.error.invalid.unauthorized"):h==="License key not valid for this plugin"?h=w("modal.error.invalid.licenseKey"):h==="License key not valid for this plugin version"?h=w("modal.error.incompatible.licenseKey"):h==="License key already registered"&&(h=w("modal.error.registered")),t.notification.error(h);return}a=!0,t.dialog.close(),t.notification.success(w("activated"))}}})})}}}function Ce(){const{hostname:r}=window.location,s=Le.includes(r),t=Ee.some(e=>r.endsWith(`.${e}`));return s||t}class ze{constructor(){this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",2:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(s){return s<1?console.error:console.log}log(s){const t=this._getLogFn(s.level),e=s.type==="log"?"":s.type,n=s.tag||"",i=`
  background: ${this.typeColorMap[s.type]||this.levelColorMap[s.level]||this.defaultColor};
  border-radius: 0.5em;
  color: white;
  font-weight: bold;
  padding: 2px 0.5em;
`.trimStart(),d=`%c${[n,e].filter(Boolean).join(":")}`;typeof s.args[0]=="string"?t(`${d}%c ${s.args[0]}`,i,"",...s.args.slice(1)):t(d,i,...s.args)}}const Be={error:0,warn:1,info:2};function Te(r){const s=new ze;return new Proxy({},{get(t,e){return(...n)=>{s.log({level:Be[e],type:e,tag:r,args:n})}}})}let Oe;function Z(){return Oe??(Oe=Te("seo-audit"))}let M=[];const q=new Map;async function $e(r){if(!Array.isArray(r))throw new TypeError("Expected an array of assets");M.length>0||(M=r)}function He(r){if(M.length===0)throw new Error("Plugin assets are not registered");const s=M.find(t=>t.filename===r);if(!s)throw new Error(`Plugin asset "${r}" not found`);return s}async function $(r){if(r.endsWith(".js")||(r+=".js"),q.has(r))return q.get(r);const t=await import(He(r).url);return q.set(r,t),t}async function X(r){const s=await r;return s.default||s}class Q extends Error{constructor({locale:s,assessment:t,compatibleLocales:e}){super(`Locale ${s.toUpperCase()} is not supported by the assessment ${t}.`),this.locale=s,this.assessment=t,this.compatibleLocales=e}}var ee={};Object.defineProperty(ee,"__esModule",{value:!0});var U=ee.default={sentenceLength:{recommendedWordCount:20,slightlyTooMany:25,farTooMany:30},fleschReading:{borders:{veryEasy:90,easy:80,fairlyEasy:70,okay:60,fairlyDifficult:50,difficult:30,veryDifficult:0},scores:{veryEasy:9,easy:9,fairlyEasy:9,okay:9,fairlyDifficult:6,difficult:3,veryDifficult:3}}};const te=["TaxonomyTextLengthAssessment","UrlLengthAssessment","UrlStopWordsAssessment","SingleH1Assessment"],Ie={FleschReadingEaseAssessment:"fleschReading",SentenceLengthInTextAssessment:"sentenceLength"},se=["FunctionWordsInKeyphraseAssessment","IntroductionKeywordAssessment","KeyphraseLengthAssessment","KeywordDensityAssessment","KeyphraseDistributionAssessment","MetaDescriptionKeywordAssessment","SubheadingsKeywordAssessment","TitleKeywordAssessment","UrlKeywordAssessment"],Me={WordComplexityAssessment:["de","en","es","fr"],KeyphraseDistributionAssessment:["ar","cs","de","el","en","es","fr","he","hu","id","it","ja","nl","no","pl","pt","ru","sk","sv","tr"],SentenceLengthInDescriptionAssessment:["ar","cs","de","el","en","es","fa","fr","he","hu","id","it","ja","nl","no","pl","pt","ru","sk","sv","tr"],SentenceLengthInTextAssessment:["ar","cs","de","el","en","es","fa","fr","he","hu","id","it","ja","nl","no","pl","pt","ru","sk","sv","tr"],PassiveVoiceAssessment:["ar","cs","de","el","en","es","fa","fr","he","hu","id","it","nl","no","pl","pt","ru","sk","sv","tr"],TransitionWordsAssessment:["ar","ca","cs","de","el","en","es","fa","fr","he","hu","id","it","nl","no","pl","pt","ru","sk","sv","tr"],FunctionWordsInKeyphraseAssessment:["ar","cs","de","el","en","es","fa","fr","he","hu","id","it","ja","nl","no","pl","pt","ru","sk","sv","tr"],FleschReadingEaseAssessment:["de","en","es","fr","it","nl","pt","ru"]},H=Object.freeze({af:"af-ZA",ar:"ar-SA",az:"az-Latn-AZ",be:"be-BY",bg:"bg-BG",ca:"ca-ES",cs:"cs-CZ",da:"da-DK",de:"de-DE",dv:"dv-MV",el:"el-GR",en:"en-US",es:"es-ES",et:"et-EE",eu:"eu-ES",fa:"fa-IR",fi:"fi-FI",fo:"fo-FO",fr:"fr-FR",gl:"gl-ES",gu:"gu-IN",he:"he-IL",hi:"hi-IN",hr:"hr-HR",hu:"hu-HU",hy:"hy-AM",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",ka:"ka-GE",kk:"kk-KZ",kn:"kn-IN",ko:"ko-KR",kok:"kok-IN",ky:"ky-KG",lt:"lt-LT",lv:"lv-LV",mk:"mk-MK",mn:"mn-MN",mr:"mr-IN",ms:"ms-MY",nl:"nl-NL",no:"nb-NO",pa:"pa-IN",pl:"pl-PL",pt:"pt-BR",ro:"ro-RO",ru:"ru-RU",sa:"sa-IN",sk:"sk-SK",sl:"sl-SI",sq:"sq-AL",sr:"sr-Latn-CS",sv:"sv-SE",sw:"sw-KE",syr:"syr-SY",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",tt:"tt-RU",uk:"uk-UA",ur:"ur-PK",uz:"uz-Latn-UZ",vi:"vi-VN"}),Pe=["error","warn","info","debug"],Fe="kirby$seo-audit$",je={AltAttributeAssessment:{_label:"Alt-Attribut für Bilder",na:"Der Text enthält keine Bilder.",none:"Keines der {imagesWithoutAltAttribute} Bilder enthält ein Attribut für alternativen Text. Fügen Sie sie hinzu!",some:"Einige der {imagesWithoutAltAttribute} Bilder enthalten ein Attribut für alternativen Text. Fügen Sie sie hinzu!",every:"Alle Bilder enthalten ein Attribut für alternativen Text. Gute Arbeit!"},HeadingStructureOrderAssessment:{_label:"Reihenfolge der Überschriften",sequential:"Die Überschriftenstruktur ist in sequenzieller Reihenfolge. Gute Arbeit!",nonSequential:"Die Überschriftenstruktur ist nicht in sequenzieller Reihenfolge. Korrigieren Sie Ihre Überschriftenstruktur!"},SingleH1Assessment:{_label:"Einzelne H1",one:"Der Text enthält einen H1-Tag. Gute Arbeit!",multiple:"Der Text enthält mehrere H1-Tags. Überdenken Sie Ihre Überschriftenstruktur!",none:"Der Text enthält keinen H1-Tag. Fügen Sie ihn hinzu!"}},De={AltAttributeAssessment:{_label:"Image alt attribute",na:"The text doesn't contain any images.",none:"None of the {imagesWithoutAltAttribute} images contain an alternative text attribute. Add them!",some:"Some of the {imagesWithoutAltAttribute} images contain an alternative text attribute. Add them!",every:"All images contain an alternative text attribute. Good job!"},HeadingStructureOrderAssessment:{_label:"Heading structure",sequential:"The heading structure is in sequential order. Good job!",nonSequential:"The heading structure is not in sequential order. Fix your heading structure!"},SingleH1Assessment:{_label:"Single H1",one:"The text contains a single H1 tag. Good job!",multiple:"The text contains multiple H1 tags. Rethink your heading structure!",none:"The text contains no H1 tag. Add it!"}},Ke={AltAttributeAssessment:{_label:"Alt-tekst voor afbeeldingen",na:"De tekst bevat geen afbeeldingen.",none:"Geen van de {imagesWithoutAltAttribute} afbeeldingen bevat alt-tekst. Voeg ze toe!",some:"Sommige van de {imagesWithoutAltAttribute} afbeeldingen bevatten alt-tekst. Voeg ze toe!",every:"Alle afbeeldingen bevatten alt-tekst. Goed gedaan!"},HeadingStructureOrderAssessment:{_label:"Kopstructuur volgorde",sequential:"De kopstructuur is in opeenvolgende volgorde. Goed gedaan!",nonSequential:"De kopstructuur is niet in opeenvolgende volgorde. Corrigeer je kopstructuur!"},SingleH1Assessment:{_label:"Enkele H1",one:"De tekst bevat één H1-tag. Goed gedaan!",multiple:"De tekst bevat meerdere H1-tags. Herzie je kopstructuur!",none:"De tekst bevat geen H1-tag. Voeg er een toe!"}};function Ne({htmlDocument:r,contentSelector:s}){const e=[...r.querySelectorAll(s)].flatMap(n=>n.tagName.toLowerCase()==="h1"?[n]:[...n.querySelectorAll("h1")]);return{score:e.length===1?9:3,translation:e.length===1?"one":e.length>1?"multiple":"none"}}function qe({htmlDocument:r,contentSelector:s}){const e=[...r.querySelectorAll(s)].flatMap(i=>i.tagName.toLowerCase()==="img"?[i]:[...i.querySelectorAll("img")]);if(e.length===0)return{score:9,translation:"na"};const o=e.filter(i=>i.getAttribute("alt")===null).length;return{score:o===e.length||o>0?3:9,translation:o===e.length?"none":o>0?"some":"every",...o>0&&{context:{imagesWithoutAltAttribute:o}}}}function Ue({htmlDocument:r,contentSelector:s}){const e=[...r.querySelectorAll(s)].flatMap(d=>["h1","h2","h3","h4","h5","h6"].includes(d.tagName.toLowerCase())?[d]:[...d.querySelectorAll("h1, h2, h3, h4, h5, h6")]);let n=0;const o=[];for(const d of e){const a=Number.parseInt(d.tagName.substring(1),10);a-n>1&&o.push(d),n=a}const i=o.length===0;return{score:i?9:3,translation:i?"sequential":"nonSequential",...!i&&{details:{text:`<ul>${o.map(d=>`<li><strong>${d.tagName}</strong>: ${d.innerText}</li>`).join("")}</ul>`}}}}function ne(r,s,t){if(!r)return t;let e,n;if(Array.isArray(s)?e=[...s]:typeof s=="string"?e=s.split("."):typeof s=="symbol"&&(e=[s]),!Array.isArray(e))throw new TypeError(`Expected props to be an array, a string or a symbol, got ${typeof e}`);for(;e.length;)if(n=e.shift(),!r||(r=r[n],r===void 0))return t;return r}function We(r,s,t){return r.replace(/\{(\w+)\}/g,(e,n)=>s[n.toLowerCase()]||n)}const re={de:je,en:De,nl:Ke},Ge={seo:{AltAttributeAssessment:qe,HeadingStructureOrderAssessment:Ue,SingleH1Assessment:Ne}};function Ve({htmlDocument:r,contentSelector:s,assessments:t,locale:e}){const n=re[e]||re.en,o={};for(const[i,d]of Object.entries(Ge)){const a=[];for(const[c,f]of Object.entries(d)){if(t.length>0&&!t.includes(c.toLowerCase()))continue;const{score:m,translation:u,context:p={},details:h}=f({htmlDocument:r,contentSelector:s}),_=ne(n,`${c}.${u}`);if(!_)continue;const A=ne(n,`${c}._label`,c),k=Object.fromEntries(Object.entries(p).map(([L,S])=>[L.toLowerCase(),S]));a.push({score:m,rating:oe(m),text:`${A}: ${We(_,k)}`,details:h})}o[i]=a}return o}async function Ye(r,s){const t=await $("yoastseo"),e=Object.fromEntries(Object.entries(Me).map(([n,o])=>[n.toLowerCase(),o]));for(const n of Object.values(t.assessments))for(const o of Object.keys(n)){if(te.includes(o)||!s.keyword&&s.assessments.length===0&&se.includes(o)||s.assessments.length>0&&!s.assessments.includes(o.toLowerCase()))continue;const i=e[o.toLowerCase()];if(!(!i||i.includes(r)))return{assessment:o,compatibleLocales:i}}}async function Je({htmlDocument:r,contentSelector:s,options:t,translations:e}){const n=await $("yoastseo"),{Jed:o}=await $("jed"),i=await X($("string-pixel-width")),d=ie(r,s),a=new n.Paper(d,{keyword:t.keyword,synonyms:t.synonyms.join(","),url:new URL(t.url).pathname,permalink:t.url,title:t.title,titleWidth:t.title?i(t.title,{font:"arial",size:20}):void 0,description:t.description,locale:t.langCulture.replace("-","_")}),c=new n.Researcher(a),f=new o({domain:"js-text-analysis",locale_data:{"js-text-analysis":e||{"":{}}}}),m=Object.entries(n.assessments).reduce((u,[p,h])=>{for(const[_,A]of Object.entries(h))if(!te.includes(_)&&!(!t.keyword&&t.assessments.length===0&&se.includes(_))&&!(t.assessments.length>0&&!t.assessments.includes(_.toLowerCase()))){if(typeof A=="object"&&Object.prototype.hasOwnProperty.call(A,"getResult")){const k=A.getResult(a,c,f);u[p].push(k)}else if(typeof A=="function"){const k=Ie[_],L=(U==null?void 0:U[k])||{},S=new A(L).getResult(a,c,f);u[p].push(S)}}return u},{seo:[],readability:[]});for(const u of Object.keys(m))m[u]=m[u].filter(p=>p.text).map(p=>({score:p.score,rating:oe(p.score),text:p.text}));return m}function oe(r){return r===-1?"error":r===0?"feedback":r<=4?"bad":r<=7?"ok":r>7?"good":""}async function Ze(r){var i,d,a;const t=new DOMParser().parseFromString(r,"text/html");for(const c of Array.from(t.body.querySelectorAll("script, style")))c.remove();let e=t.documentElement.lang??H.en;e.includes("-")||(e=(H==null?void 0:H[e.toLowerCase()])??H.en);const n=t.title||((i=t.querySelector("h1"))==null?void 0:i.innerText)||((d=t.querySelector("h2"))==null?void 0:d.innerText)||"",o=((a=t.querySelector('meta[name="description"]'))==null?void 0:a.content)||"";return{htmlDocument:t,locale:e,title:n,description:o}}function ie(r,s){const t=r.querySelectorAll(s);return Array.from(t).map(e=>e.innerHTML).join(`
`)}function Xe(){const r=R(),s=Y();O(()=>s.getters["content/values"]());const t=Z();return{generateReport:async(n,o,i)=>{const d=await X($("yoastseo-translations"));if(i.logLevel>1){o&&t.info("Content selector:",o);const p=n.querySelectorAll(o),h=ie(n,o);t.info("Selected elements:",p),t.info("Selected content:",h)}i.assessments=i.assessments.map(p=>{let h=p.toLowerCase();return h.endsWith("assessment")||(h+="assessment"),h});const a=r.translation.code,c={seo:[],readability:[]},f=Ve({htmlDocument:n,contentSelector:o,assessments:i.assessments,locale:a});for(const[p,h]of Object.entries(f))c[p]=c[p].concat(h);const m=await Ye(a,i);if(m)throw new Q({...m,locale:a});const u=await Je({htmlDocument:n,contentSelector:o,options:i,translations:d[a]});for(const[p,h]of Object.entries(u))c[p]=c[p].concat(h);return c}}}const ae=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function Qe(r,s){s?s={...ae,...s}:s=ae;const t=le(s);return t.dispatch(r),t.toString()}const et=Object.freeze(["prototype","__proto__","constructor"]);function le(r){let s="",t=new Map;const e=n=>{s+=n};return{toString(){return s},getContext(){return t},dispatch(n){return r.replacer&&(n=r.replacer(n)),this[n===null?"null":typeof n](n)},object(n){if(n&&typeof n.toJSON=="function")return this.object(n.toJSON());const o=Object.prototype.toString.call(n);let i="";const d=o.length;d<10?i="unknown:["+o+"]":i=o.slice(8,d-1),i=i.toLowerCase();let a=null;if((a=t.get(n))===void 0)t.set(n,t.size);else return this.dispatch("[CIRCULAR:"+a+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(n))return e("buffer:"),e(n.toString("utf8"));if(i!=="object"&&i!=="function"&&i!=="asyncfunction")this[i]?this[i](n):r.ignoreUnknown||this.unkown(n,i);else{let c=Object.keys(n);r.unorderedObjects&&(c=c.sort());let f=[];r.respectType!==!1&&!ue(n)&&(f=et),r.excludeKeys&&(c=c.filter(u=>!r.excludeKeys(u)),f=f.filter(u=>!r.excludeKeys(u))),e("object:"+(c.length+f.length)+":");const m=u=>{this.dispatch(u),e(":"),r.excludeValues||this.dispatch(n[u]),e(",")};for(const u of c)m(u);for(const u of f)m(u)}},array(n,o){if(o=o===void 0?r.unorderedArrays!==!1:o,e("array:"+n.length+":"),!o||n.length<=1){for(const a of n)this.dispatch(a);return}const i=new Map,d=n.map(a=>{const c=le(r);c.dispatch(a);for(const[f,m]of c.getContext())i.set(f,m);return c.toString()});return t=i,d.sort(),this.array(d,!1)},date(n){return e("date:"+n.toJSON())},symbol(n){return e("symbol:"+n.toString())},unkown(n,o){if(e(o),!!n&&(e(":"),n&&typeof n.entries=="function"))return this.array(Array.from(n.entries()),!0)},error(n){return e("error:"+n.toString())},boolean(n){return e("bool:"+n)},string(n){e("string:"+n.length+":"),e(n)},function(n){e("fn:"),ue(n)?this.dispatch("[native]"):this.dispatch(n.toString()),r.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(n.name)),r.respectFunctionProperties&&this.object(n)},number(n){return e("number:"+n)},xml(n){return e("xml:"+n.toString())},null(){return e("Null")},undefined(){return e("Undefined")},regexp(n){return e("regex:"+n.toString())},uint8array(n){return e("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},uint8clampedarray(n){return e("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},int8array(n){return e("int8array:"),this.dispatch(Array.prototype.slice.call(n))},uint16array(n){return e("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},int16array(n){return e("int16array:"),this.dispatch(Array.prototype.slice.call(n))},uint32array(n){return e("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},int32array(n){return e("int32array:"),this.dispatch(Array.prototype.slice.call(n))},float32array(n){return e("float32array:"),this.dispatch(Array.prototype.slice.call(n))},float64array(n){return e("float64array:"),this.dispatch(Array.prototype.slice.call(n))},arraybuffer(n){return e("arraybuffer:"),this.dispatch(new Uint8Array(n))},url(n){return e("url:"+n.toString())},map(n){e("map:");const o=[...n];return this.array(o,r.unorderedSets!==!1)},set(n){e("set:");const o=[...n];return this.array(o,r.unorderedSets!==!1)},file(n){return e("file:"),this.dispatch([n.name,n.size,n.type,n.lastModfied])},blob(){if(r.ignoreUnknown)return e("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return e("domwindow")},bigint(n){return e("bigint:"+n.toString())},process(){return e("process")},timer(){return e("timer")},pipe(){return e("pipe")},tcp(){return e("tcp")},udp(){return e("udp")},tty(){return e("tty")},statwatcher(){return e("statwatcher")},securecontext(){return e("securecontext")},connection(){return e("connection")},zlib(){return e("zlib")},context(){return e("context")},nodescript(){return e("nodescript")},httpparser(){return e("httpparser")},dataview(){return e("dataview")},signal(){return e("signal")},fsevent(){return e("fsevent")},tlswrap(){return e("tlswrap")}}}const ce="[native code] }",tt=ce.length;function ue(r){return typeof r!="function"?!1:Function.prototype.toString.call(r).slice(-tt)===ce}var st=Object.defineProperty,nt=(r,s,t)=>s in r?st(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,z=(r,s,t)=>(nt(r,typeof s!="symbol"?s+"":s,t),t);class x{constructor(s,t){z(this,"words"),z(this,"sigBytes"),s=this.words=s||[],this.sigBytes=t===void 0?s.length*4:t}toString(s){return(s||rt).stringify(this)}concat(s){if(this.clamp(),this.sigBytes%4)for(let t=0;t<s.sigBytes;t++){const e=s.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=e<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<s.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=s.words[t>>>2];return this.sigBytes+=s.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new x([...this.words])}}const rt={stringify(r){const s=[];for(let t=0;t<r.sigBytes;t++){const e=r.words[t>>>2]>>>24-t%4*8&255;s.push((e>>>4).toString(16),(e&15).toString(16))}return s.join("")}},ot={stringify(r){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=[];for(let e=0;e<r.sigBytes;e+=3){const n=r.words[e>>>2]>>>24-e%4*8&255,o=r.words[e+1>>>2]>>>24-(e+1)%4*8&255,i=r.words[e+2>>>2]>>>24-(e+2)%4*8&255,d=n<<16|o<<8|i;for(let a=0;a<4&&e*8+a*6<r.sigBytes*8;a++)t.push(s.charAt(d>>>6*(3-a)&63))}return t.join("")}},it={parse(r){const s=r.length,t=[];for(let e=0;e<s;e++)t[e>>>2]|=(r.charCodeAt(e)&255)<<24-e%4*8;return new x(t,s)}},at={parse(r){return it.parse(unescape(encodeURIComponent(r)))}};class lt{constructor(){z(this,"_data",new x),z(this,"_nDataBytes",0),z(this,"_minBufferSize",0),z(this,"blockSize",512/32)}reset(){this._data=new x,this._nDataBytes=0}_append(s){typeof s=="string"&&(s=at.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes}_doProcessBlock(s,t){}_process(s){let t,e=this._data.sigBytes/(this.blockSize*4);s?e=Math.ceil(e):e=Math.max((e|0)-this._minBufferSize,0);const n=e*this.blockSize,o=Math.min(n*4,this._data.sigBytes);if(n){for(let i=0;i<n;i+=this.blockSize)this._doProcessBlock(this._data.words,i);t=this._data.words.splice(0,n),this._data.sigBytes-=o}return new x(t,o)}}class ct extends lt{update(s){return this._append(s),this._process(),this}finalize(s){s&&this._append(s)}}var ut=Object.defineProperty,dt=(r,s,t)=>s in r?ut(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,ft=(r,s,t)=>(dt(r,s+"",t),t);const de=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ht=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],C=[];class pt extends ct{constructor(){super(...arguments),ft(this,"_hash",new x([...de]))}reset(){super.reset(),this._hash=new x([...de])}_doProcessBlock(s,t){const e=this._hash.words;let n=e[0],o=e[1],i=e[2],d=e[3],a=e[4],c=e[5],f=e[6],m=e[7];for(let u=0;u<64;u++){if(u<16)C[u]=s[t+u]|0;else{const S=C[u-15],I=(S<<25|S>>>7)^(S<<14|S>>>18)^S>>>3,E=C[u-2],B=(E<<15|E>>>17)^(E<<13|E>>>19)^E>>>10;C[u]=I+C[u-7]+B+C[u-16]}const p=a&c^~a&f,h=n&o^n&i^o&i,_=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),A=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),k=m+A+p+ht[u]+C[u],L=_+h;m=f,f=c,c=a,a=d+k|0,d=i,i=o,o=n,n=k+L|0}e[0]=e[0]+n|0,e[1]=e[1]+o|0,e[2]=e[2]+i|0,e[3]=e[3]+d|0,e[4]=e[4]+a|0,e[5]=e[5]+c|0,e[6]=e[6]+f|0,e[7]=e[7]+m|0}finalize(s){super.finalize(s);const t=this._nDataBytes*8,e=this._data.sigBytes*8;return this._data.words[e>>>5]|=128<<24-e%32,this._data.words[(e+64>>>9<<4)+14]=Math.floor(t/4294967296),this._data.words[(e+64>>>9<<4)+15]=t,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function mt(r){return new pt().finalize(r).toString(ot)}function gt(r,s={}){const t=typeof r=="string"?r:Qe(r,s);return mt(t).slice(0,10)}function yt(...r){return`${Fe}${gt([...r])}`}const vt={__name:"SeoRatingBubble",props:{rating:{type:String,required:!0}},setup(r){return{__sfc:!0,colorMap:{good:"green",ok:"orange",bad:"red"}}}};var bt=function(){var s=this,t=s._self._c,e=s._self._setupProxy;return t("div",{staticClass:"ksr-mt-[0.375em] ksr-h-[12px] ksr-w-[12px] ksr-rounded-full",style:{backgroundColor:`var(--color-${e.colorMap[s.rating]??"gray"}-600)`}},[t("span",{staticClass:"ksr-sr-only"},[s._v(s._s(s.rating))])])},_t=[],St=K(vt,bt,_t);const At=St.exports,kt={__name:"SeoResultEntry",props:{result:{type:Object,required:!0},links:{type:Boolean,default:!0}},setup(r){const s=r,t=R(),e=O(()=>{const o=s.result.text.replace(/!$/,".");return s.links?o:n(o)});function n(o){return new DOMParser().parseFromString(o,"text/html").body.textContent||""}return{__sfc:!0,props:s,panel:t,parseText:e,stripTags:n,SeoRatingBubble:At}}};var wt=function(){var s=this,t=s._self._c,e=s._self._setupProxy;return t("div",{staticClass:"ksr-flex ksr-items-start ksr-gap-2"},[t(e.SeoRatingBubble,{staticClass:"ksr-mx-1 ksr-shrink-0",attrs:{rating:s.result.rating}}),t("div",[t("div",{domProps:{innerHTML:s._s(e.parseText)}}),s.result.details?t("details",[t("summary",[s._v(s._s(e.panel.t("johannschopplich.seo-audit.issues")))]),t("div",{staticClass:"ksr-mb-1 ksr-rounded-[var(--rounded)] ksr-bg-[var(--color-border)] ksr-py-0.5",domProps:{innerHTML:s._s(s.result.details.text)}})]):s._e()])],1)},xt=[],Lt=K(kt,wt,xt);const Et=Lt.exports,fe={...we},Rt=Object.assign({inheritAttrs:!1},{__name:"SeoAudit",props:fe,setup(r){const s=r,t=R(),e=D(),n=Y(),o=Z(),{generateReport:i}=Xe(),{openLicenseModal:d,assertActivationIntegrity:a}=Re({label:"Kirby SEO Audit",apiNamespace:"__seo-audit__"}),c=yt(t.view.path);let f;const m=b(),u=b(),p=b(),h=b(),_=b(),A=b(),k=b(),L=b(),S=b(),I=b(),E=b(),B=b(),he=b(!1),W=b(!1),pe=b(),P=b(),G=O(()=>n.getters["content/values"]()),me=O(()=>u.value||G.value[p.value]||""),ge=O(()=>{if(!h.value&&!_.value)return[];const g=h.value||G.value[_.value];return Array.isArray(g)?g:typeof g=="string"?g.split(",").map(v=>v.trim()):[]});ke(()=>t.language.code,()=>{V()}),V(!0);const{format:Ot}=new Intl.DateTimeFormat(t.translation.code.replace("_","-"),{dateStyle:"short",timeStyle:"short"});async function V(g=!1){const{load:v}=Se(),y=await v({parent:s.parent,name:s.name});if(g){if(m.value=ye(y.label)||t.t("johannschopplich.seo-audit.label"),p.value=y.keyphraseField,_.value=y.synonymsField,A.value=y.assessments,k.value=y.contentSelector,L.value=y.links,S.value=y.persisted,I.value=Pe.indexOf(y.config.logLevel??y.logLevel),E.value=y.config,B.value=y.license,$e(y.assets),S.value){const F=JSON.parse(localStorage.getItem(c));F&&(P.value=F)}he.value=!0,a({component:pe,licenseStatus:B.value})}u.value=y.keyphrase,h.value=y.synonyms,f=(await e.get(t.view.path,{select:"previewUrl"})).previewUrl}function ye(g){return!g||typeof g=="string"?g:g[t.translation.code]??Object.values(g)[0]}async function $t(){if(!f){t.notification.error(t.t("johannschopplich.seo-audit.error.missingPreviewUrl"));return}const g=f;t.isLoading=!0,W.value=!0;try{const v=await be(g),{htmlDocument:y,locale:T,title:F,description:It}=await Ze(v),j=await i(y,k.value,{assessments:A.value,logLevel:I.value,url:g,title:F,description:It,langCulture:T,keyword:me.value,synonyms:ge.value});for(const _e of Object.keys(j))j[_e]=ve(j[_e]);P.value={result:j,timestamp:Date.now()},S.value&&localStorage.setItem(c,JSON.stringify(P.value))}catch(v){console.error(v),v instanceof Q?t.notification.error(t.t("johannschopplich.seo-audit.error.incompatibleLocale",{locale:v.locale.toUpperCase(),assessment:v.assessment,compatibleLocales:v.compatibleLocales.map(y=>y.toUpperCase()).join(", ")})):t.notification.error(t.t("johannschopplich.seo-audit.analyze.error"))}t.isLoading=!1,W.value=!1,t.notification.success({icon:"check",message:t.t("johannschopplich.seo-audit.analyze.success")})}function ve(g){return g.toSorted((v,y)=>v.rating==="feedback"?-1:y.rating==="feedback"?1:v.score<y.score?-1:1)}async function be(g){if(location.origin===new URL(g).origin){const T=await fetch(g);return T.ok||o.warn(`Response status code ${T.status} for URL ${g} is an indication that the error page is being analyzed.`),await T.text()}const{code:v,html:y}=await e.post("__seo-audit__/proxy",{url:g});return v!==200&&o.warn(`Response status code ${v} for URL ${g} is an indication that the error page is being analyzed.`),y}async function Ht(){const{isRegistered:g}=await d();g&&(B.value="active")}return{__sfc:!0,propsDefinition:fe,props:s,panel:t,api:e,store:n,logger:o,generateReport:i,openLicenseModal:d,assertActivationIntegrity:a,storageKey:c,previewUrl:f,label:m,keyphrase:u,keyphraseField:p,synonyms:h,synonymsField:_,assessments:A,contentSelector:k,links:L,persisted:S,logLevel:I,config:E,license:B,isInitialized:he,isGenerating:W,licenseButtonGroup:pe,report:P,currentContent:G,resolvedKeyphrase:me,resolvedSynonyms:ge,format:Ot,updateSectionData:V,t:ye,analyze:$t,sortResults:ve,fetchHtml:be,handleRegistration:Ht,SeoResultEntry:Et}}});var Ct=function(){var s=this,t=s._self._c,e=s._self._setupProxy;return e.isInitialized?t("k-section",{attrs:{label:e.label}},[e.license!=="active"?t("k-button-group",{ref:"licenseButtonGroup",attrs:{slot:"options",layout:"collapsed"},slot:"options"},[t("k-button",{attrs:{theme:"love",variant:"filled",size:"xs",link:"https://kirbyseo.com/buy",target:"_blank",text:e.panel.t("johannschopplich.seo-audit.license.buy")}}),t("k-button",{attrs:{theme:"love",variant:"filled",size:"xs",icon:"key",text:e.panel.t("johannschopplich.seo-audit.license.activate")},on:{click:function(n){return e.handleRegistration()}}})],1):s._e(),t("div",{staticClass:"ksr-space-y-4"},[t("k-button-group",{attrs:{layout:"collapsed"}},[t("k-button",{attrs:{icon:e.isGenerating?"loader":"seo-audit-analyze",text:e.panel.t("johannschopplich.seo-audit.analyze"),variant:"filled",size:"sm",theme:"positive",disabled:e.isGenerating},on:{click:function(n){return e.analyze()}}})],1),e.report?t("div",[t("k-box",{class:[e.isGenerating&&"ksr-cusor-wait ksr-pointer-events-none ksr-animate-pulse"],staticStyle:{"--link-color":"var(--color-text)"},attrs:{theme:"passive"}},[t("k-text",{staticClass:"ksr-space-y-4",class:[e.isGenerating&&"ksr-opacity-50"]},[e.report.result.seo.length>0?t("div",s._l(e.report.result.seo,function(n,o){return t("div",{key:o},[t(e.SeoResultEntry,{attrs:{result:n,links:e.links}})],1)}),0):s._e(),e.report.result.readability.length>0?t("div",[t("k-label",{staticClass:"ksr-mb-1",style:{color:"var(--color-text)"}},[s._v(" "+s._s(e.panel.t("johannschopplich.seo-audit.readability"))+" ")]),s._l(e.report.result.readability,function(n,o){return t("div",{key:o},[t(e.SeoResultEntry,{attrs:{result:n,links:e.links}})],1)})],2):s._e()])],1),t("k-box",{staticClass:"ksr-border-transparent",attrs:{theme:"empty",icon:"clock"}},[s._v(" "+s._s(e.format(e.report.timestamp))+" ")])],1):s._e()],1)],1):s._e()},zt=[],Bt=K(Rt,Ct,zt);const Tt=Bt.exports;window.panel.plugin("johannschopplich/seo-audit",{sections:{"seo-audit":Tt},icons:{"seo-audit-analyze":'<path d="M8 3a7 7 0 0 0 0 14h1.07a7.06 7.06 0 0 1 0-2H8A5 5 0 0 1 8 5h8a5 5 0 0 1 4.9 6a7.021 7.021 0 0 1 1.426 2A7 7 0 0 0 16 3zm8 10a3 3 0 1 0 0 6a3 3 0 0 0 0-6m-5 3a5 5 0 1 1 9.172 2.757l2.535 2.536l-1.414 1.414l-2.536-2.535A5 5 0 0 1 11 16" />'}})})();
