(function(){"use strict";function E(){return window.panel}function K(){return E().api}function me(){const r=K();return{load:({parent:t,name:e})=>r.get(`${t}/sections/${e}`)}}function Y(){return E().app.$store}const l=window.Vue,T=l.computed;l.customRef,l.defineAsyncComponent,l.defineComponent,l.effectScope,l.getCurrentInstance,l.getCurrentScope,l.h,l.inject,l.isProxy,l.isReactive,l.isReadonly,l.isRef,l.isShallow,l.markRaw;const ye=l.nextTick;l.onActivated,l.onBeforeMount,l.onBeforeUnmount,l.onBeforeUpdate,l.onDeactivated,l.onErrorCaptured,l.onMounted,l.onRenderTracked,l.onRenderTriggered,l.onScopeDispose,l.onServerPrefetch,l.onUnmounted,l.onUpdated,l.provide,l.proxyRefs,l.reactive,l.readonly;const y=l.ref;l.shallowReactive,l.shallowReadonly,l.shallowRef,l.toRaw,l.toRef,l.toRefs,l.triggerRef;const J=l.unref;l.useAttrs,l.useCssModule,l.useCssVars,l.useListeners,l.useSlots;const ve=l.watch;l.watchEffect,l.watchPostEffect,l.watchSyncEffect;const be={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function P(r,n,t,e,s,i,a,f){var o=typeof r=="function"?r.options:r;return n&&(o.render=n,o.staticRenderFns=t,o._compiled=!0),{exports:r,options:o}}const j={en:{"modal.info":"Thanks for purchasing {label}! Please enter your email address and order ID to activate your license.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Find your order number</a> on Lemon Squeezy or <a href="mailto:hello@kirby.tools">contact us</a> if you cannot find it.',"modal.error.required.fields":"Email address and order ID are required","modal.error.invalid.unauthorized":"Email address or order ID is incorrect","modal.error.invalid.licenseKey":"License key invalid for this plugin","modal.error.incompatible.licenseKey":"License key invalid for this plugin version","modal.error.registered":"License key already registered",activate:"Activate",activated:"Plugin activated"},de:{"modal.info":"Dankeschön für den Kauf von {label}! Bitte gib deine E-Mail-Adresse und Bestellnummer ein, um deine Lizenz zu aktivieren.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Finde deine Bestellnummer</a> bei Lemon Squeezy oder <a href="mailto:hello@kirby.tools">kontaktiere uns</a>, wenn du sie nicht finden kannst.',"modal.error.required.fields":"E-Mail-Adresse und Bestellnummer sind notwendig","modal.error.invalid.unauthorized":"E-Mail-Adresse oder Bestellnummer ist falsch","modal.error.invalid.licenseKey":"Lizenzschlüssel ungültig für dieses Plugin","modal.error.incompatible.licenseKey":"Lizenzschlüssel ungültig für diese Plugin-Version","modal.error.registered":"Lizenzschlüssel bereits registriert",activate:"Aktivieren",activated:"Plugin aktiviert"},fr:{"modal.info":"Merci d'avoir acheté {label} ! Veuillez saisir votre adresse e-mail et votre numéro de commande pour activer votre licence.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Trouvez votre numéro de commande</a> sur Lemon Squeezy ou <a href="mailto:hello@kirby.tools">contactez-nous</a> si vous ne le trouvez pas.',"modal.error.required.fields":"Adresse e-mail et numéro de commande requis","modal.error.invalid.unauthorized":"Adresse e-mail ou numéro de commande incorrect","modal.error.invalid.licenseKey":"Clé de licence invalide pour ce plugin","modal.error.incompatible.licenseKey":"Clé de licence invalide pour cette version du plugin","modal.error.registered":"Clé de licence déjà enregistrée",activate:"Activer",activated:"Plugin activé"}};function x(r,n,t){var a;const s=E().translation.code,i=((a=j==null?void 0:j[s])==null?void 0:a[r])??t;if(i)return n?_e(i,n):i}function _e(r,n,t){return r.replace(/\{(\w+)\}/g,(e,s)=>n[s]||s)}const ke=["localhost","127.0.0.1","[::1]"],Se=["local","test","ddev.site"];function Ae({label:r,apiNamespace:n}){const t=E(),e=K(),s=we(),i=async(o,u)=>{if(!o||!u)throw new Error("Email and order ID are required");const d=await e.post(`${n}/register`,{email:o,orderId:u});if((d==null?void 0:d.status)!=="ok")throw new Error("Registration failed");return!0};return{isLocalhost:s,assertActivationIntegrity:async({component:o,licenseStatus:u})=>{if(J(u)==="active")return;await ye();const d=J(o);if(!(d!=null&&d.$el)||window.getComputedStyle(d.$el).display==="none"||window.getComputedStyle(d.$el).visibility==="hidden"||window.getComputedStyle(d.$el).opacity==="0")throw new Error("Are you trying to hide the activation buttons? Please buy a license.")},openLicenseModal:()=>{let o=!1;return new Promise(u=>{t.dialog.open({component:"k-form-dialog",props:{submitButton:{icon:"check",theme:"love",text:x("activate",{label:r})},fields:{info:{type:"info",text:x("modal.info",{label:r})},email:{label:t.t("email"),type:"email"},orderId:{label:"Order ID",type:"text",help:x("modal.fields.orderId.help",{label:r})}}},on:{close:()=>{u({isRegistered:o})},submit:async d=>{const{email:h,orderId:c}=d;if(!h||!c){t.notification.error(x("modal.error.required.fields"));return}try{await i(h,Number(c))}catch(v){let p=v.message;p==="Unauthorized"?p=x("modal.error.invalid.unauthorized"):p==="License key not valid for this plugin"?p=x("modal.error.invalid.licenseKey"):p==="License key not valid for this plugin version"?p=x("modal.error.incompatible.licenseKey"):p==="License key already registered"&&(p=x("modal.error.registered")),t.notification.error(p);return}o=!0,t.dialog.close(),t.notification.success(x("activated"))}}})})}}}function we(){const{hostname:r}=window.location,n=ke.includes(r),t=Se.some(e=>r.endsWith(`.${e}`));return n||t}class xe{constructor(){this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",2:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(n){return n<1?console.error:console.log}log(n){const t=this._getLogFn(n.level),e=n.type==="log"?"":n.type,s=n.tag||"",a=`
  background: ${this.typeColorMap[n.type]||this.levelColorMap[n.level]||this.defaultColor};
  border-radius: 0.5em;
  color: white;
  font-weight: bold;
  padding: 2px 0.5em;
`.trimStart(),f=`%c${[s,e].filter(Boolean).join(":")}`;typeof n.args[0]=="string"?t(`${f}%c ${n.args[0]}`,a,"",...n.args.slice(1)):t(f,a,...n.args)}}const Re={error:0,warn:1,info:2};function Le(r){const n=new xe;return new Proxy({},{get(t,e){return(...s)=>{n.log({level:Re[e],type:e,tag:r,args:s})}}})}let Ee;function ze(){return Ee??(Ee=Le("seo-audit"))}let O=[];const q=new Map;async function Be(r){if(!Array.isArray(r))throw new TypeError("Expected an array of assets");O.length>0||(O=r)}function Ce(r){if(O.length===0)throw new Error("Plugin assets are not registered");const n=O.find(t=>t.filename===r);if(!n)throw new Error(`Plugin asset "${r}" not found`);return n}async function I(r){if(r.endsWith(".js")||(r+=".js"),q.has(r))return q.get(r);const t=await import(Ce(r).url);return q.set(r,t),t}async function Z(r){const n=await r;return n.default||n}var X={};Object.defineProperty(X,"__esModule",{value:!0});var N=X.default={sentenceLength:{recommendedWordCount:20,slightlyTooMany:25,farTooMany:30},fleschReading:{borders:{veryEasy:90,easy:80,fairlyEasy:70,okay:60,fairlyDifficult:50,difficult:30,veryDifficult:0},scores:{veryEasy:9,easy:9,fairlyEasy:9,okay:9,fairlyDifficult:6,difficult:3,veryDifficult:3}}};const $e=["TaxonomyTextLengthAssessment","UrlLengthAssessment","UrlStopWordsAssessment","SingleH1Assessment"],Te={FleschReadingEaseAssessment:"fleschReading",SentenceLengthInTextAssessment:"sentenceLength"},He=["FunctionWordsInKeyphraseAssessment","IntroductionKeywordAssessment","KeyphraseLengthAssessment","KeywordDensityAssessment","KeyphraseDistributionAssessment","MetaDescriptionKeywordAssessment","SubheadingsKeywordAssessment","TitleKeywordAssessment","UrlKeywordAssessment"],H=Object.freeze({af:"af-ZA",ar:"ar-SA",az:"az-Latn-AZ",be:"be-BY",bg:"bg-BG",ca:"ca-ES",cs:"cs-CZ",da:"da-DK",de:"de-DE",dv:"dv-MV",el:"el-GR",en:"en-US",es:"es-ES",et:"et-EE",eu:"eu-ES",fa:"fa-IR",fi:"fi-FI",fo:"fo-FO",fr:"fr-FR",gl:"gl-ES",gu:"gu-IN",he:"he-IL",hi:"hi-IN",hr:"hr-HR",hu:"hu-HU",hy:"hy-AM",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",ka:"ka-GE",kk:"kk-KZ",kn:"kn-IN",ko:"ko-KR",kok:"kok-IN",ky:"ky-KG",lt:"lt-LT",lv:"lv-LV",mk:"mk-MK",mn:"mn-MN",mr:"mr-IN",ms:"ms-MY",nl:"nl-NL",no:"nb-NO",pa:"pa-IN",pl:"pl-PL",pt:"pt-BR",ro:"ro-RO",ru:"ru-RU",sa:"sa-IN",sk:"sk-SK",sl:"sl-SI",sq:"sq-AL",sr:"sr-Latn-CS",sv:"sv-SE",sw:"sw-KE",syr:"syr-SY",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",tt:"tt-RU",uk:"uk-UA",ur:"ur-PK",uz:"uz-Latn-UZ",vi:"vi-VN"}),Oe=["error","warn","info","debug"],Ie="kirby$seo-audit$",Me={AltAttributeAssessment:{_label:"Alt-Attribut für Bilder",na:"Der Text enthält keine Bilder.",none:"Keines der {imagesWithoutAltAttribute} Bilder enthält ein Attribut für alternativen Text. Fügen Sie sie hinzu!",some:"Einige der {imagesWithoutAltAttribute} Bilder enthalten ein Attribut für alternativen Text. Fügen Sie sie hinzu!",every:"Alle Bilder enthalten ein Attribut für alternativen Text. Gute Arbeit!"},HeadingStructureOrderAssessment:{_label:"Reihenfolge der Überschriften",sequential:"Die Überschriftenstruktur ist in sequenzieller Reihenfolge. Gute Arbeit!",nonSequential:"Die Überschriftenstruktur ist nicht in sequenzieller Reihenfolge. Korrigieren Sie Ihre Überschriftenstruktur!"},SingleH1Assessment:{_label:"Einzelne H1",one:"Der Text enthält einen H1-Tag. Gute Arbeit!",multiple:"Der Text enthält mehrere H1-Tags. Überdenken Sie Ihre Überschriftenstruktur!",none:"Der Text enthält keinen H1-Tag. Fügen Sie ihn hinzu!"}},De={AltAttributeAssessment:{_label:"Image alt attribute",na:"The text doesn't contain any images.",none:"None of the {imagesWithoutAltAttribute} images contain an alternative text attribute. Add them!",some:"Some of the {imagesWithoutAltAttribute} images contain an alternative text attribute. Add them!",every:"All images contain an alternative text attribute. Good job!"},HeadingStructureOrderAssessment:{_label:"Heading structure",sequential:"The heading structure is in sequential order. Good job!",nonSequential:"The heading structure is not in sequential order. Fix your heading structure!"},SingleH1Assessment:{_label:"Single H1",one:"The text contains a single H1 tag. Good job!",multiple:"The text contains multiple H1 tags. Rethink your heading structure!",none:"The text contains no H1 tag. Add it!"}},Fe={AltAttributeAssessment:{_label:"Alt-tekst voor afbeeldingen",na:"De tekst bevat geen afbeeldingen.",none:"Geen van de {imagesWithoutAltAttribute} afbeeldingen bevat alt-tekst. Voeg ze toe!",some:"Sommige van de {imagesWithoutAltAttribute} afbeeldingen bevatten alt-tekst. Voeg ze toe!",every:"Alle afbeeldingen bevatten alt-tekst. Goed gedaan!"},HeadingStructureOrderAssessment:{_label:"Kopstructuur volgorde",sequential:"De kopstructuur is in opeenvolgende volgorde. Goed gedaan!",nonSequential:"De kopstructuur is niet in opeenvolgende volgorde. Corrigeer je kopstructuur!"},SingleH1Assessment:{_label:"Enkele H1",one:"De tekst bevat één H1-tag. Goed gedaan!",multiple:"De tekst bevat meerdere H1-tags. Herzie je kopstructuur!",none:"De tekst bevat geen H1-tag. Voeg er een toe!"}};function Ke({htmlDocument:r,contentSelector:n}){const t=U(`${n} h1`,r);return{score:t.length===1?9:3,translation:t.length===1?"one":t.length>1?"multiple":"none"}}function Pe({htmlDocument:r,contentSelector:n}){const t=U(`${n} img`,r);if(t.length===0)return{score:9,translation:"na"};const s=t.filter(i=>i.getAttribute("alt")===null).length;return{score:s===t.length||s>0?3:9,translation:s===t.length?"none":s>0?"some":"every",...s>0&&{context:{imagesWithoutAltAttribute:s}}}}function je({htmlDocument:r,contentSelector:n}){const t=U(`${n} h1, ${n} h2, ${n} h3, ${n} h4, ${n} h5, ${n} h6`,r);let e=0;const s=[];for(const a of t){const f=Number.parseInt(a.tagName.substring(1),10);f-e>1&&s.push(a),e=f}const i=s.length===0;return{score:i?9:3,translation:i?"sequential":"nonSequential",...!i&&{details:{text:`<ul>${s.map(a=>`<li><strong>${a.tagName}</strong>: ${a.innerText}</li>`).join("")}</ul>`}}}}function U(r,n){return Array.from(n.querySelectorAll(r))}function Q(r,n,t){if(!r)return t;let e,s;if(Array.isArray(n)?e=[...n]:typeof n=="string"?e=n.split("."):typeof n=="symbol"&&(e=[n]),!Array.isArray(e))throw new TypeError(`Expected props to be an array, a string or a symbol, got ${typeof e}`);for(;e.length;)if(s=e.shift(),!r||(r=r[s],r===void 0))return t;return r}function qe(r,n,t){return r.replace(/\{(\w+)\}/g,(e,s)=>n[s.toLowerCase()]||s)}const ee={de:Me,en:De,nl:Fe},Ne={seo:{AltAttributeAssessment:Pe,HeadingStructureOrderAssessment:je,SingleH1Assessment:Ke}};function Ue({htmlDocument:r,contentSelector:n,assessments:t,locale:e}){const s=ee[e]||ee.en,i={};for(const[a,f]of Object.entries(Ne)){const o=[];for(const[u,d]of Object.entries(f)){if(t.length>0&&!t.includes(u.toLowerCase()))continue;const{score:h,translation:c,context:v={},details:p}=d({htmlDocument:r,contentSelector:n}),A=Q(s,`${u}.${c}`);if(!A)continue;const S=Q(s,`${u}._label`,u),b=Object.fromEntries(Object.entries(v).map(([w,_])=>[w.toLowerCase(),_]));o.push({score:h,rating:te(h),text:`${S}: ${qe(A,b)}`,details:p})}i[a]=o}return i}async function Ge({htmlDocument:r,contentSelector:n,options:t,translations:e}){var c;const s=await I("yoastseo"),{Jed:i}=await I("jed"),a=await Z(I("string-pixel-width")),f=((c=r.querySelector(n))==null?void 0:c.innerHTML)||"",o=new s.Paper(f,{keyword:t.keyword,synonyms:t.synonyms.join(","),url:new URL(t.url).pathname,permalink:t.url,title:t.title,titleWidth:t.title?a(t.title,{font:"arial",size:20}):void 0,description:t.description,locale:t.langCulture.replace("-","_")}),u=new s.Researcher(o),d=new i({domain:"js-text-analysis",locale_data:{"js-text-analysis":e||{"":{}}}}),h=Object.entries(s.assessments).reduce((v,[p,A])=>{for(const[S,b]of Object.entries(A))if(!$e.includes(S)&&!(!t.keyword&&t.assessments.length===0&&He.includes(S))&&!(t.assessments.length>0&&!t.assessments.includes(S.toLowerCase()))){if(typeof b=="object"&&Object.prototype.hasOwnProperty.call(b,"getResult")){const w=b.getResult(o,u,d);v[p].push(w)}else if(typeof b=="function"){const w=Te[S],_=(N==null?void 0:N[w])||{},B=new b(_).getResult(o,u,d);v[p].push(B)}}return v},{seo:[],readability:[]});for(const v of Object.keys(h))h[v]=h[v].filter(p=>p.text).map(p=>({score:p.score,rating:te(p.score),text:p.text}));return h}function te(r){return r===-1?"error":r===0?"feedback":r<=4?"bad":r<=7?"ok":r>7?"good":""}async function We(r){var a,f,o;const t=new DOMParser().parseFromString(r,"text/html");for(const u of Array.from(t.body.querySelectorAll("script, style")))u.remove();let e=t.documentElement.lang??H.en;e.includes("-")||(e=(H==null?void 0:H[e.toLowerCase()])??H.en);const s=t.title||((a=t.querySelector("h1"))==null?void 0:a.innerText)||((f=t.querySelector("h2"))==null?void 0:f.innerText)||"",i=((o=t.querySelector('meta[name="description"]'))==null?void 0:o.content)||"";return{htmlDocument:t,locale:e,title:s,description:i}}function Ve(){const r=E(),n=Y();return T(()=>n.getters["content/values"]()),{generateReport:async(e,s,i)=>{const a=await Z(I("yoastseo-translations"));i.assessments=i.assessments.map(h=>{let c=h.toLowerCase();return c.endsWith("assessment")||(c+="assessment"),c});const f=r.translation.code,o={seo:[],readability:[]},u=Ue({htmlDocument:e,contentSelector:s,assessments:i.assessments,locale:f});for(const[h,c]of Object.entries(u))o[h]=o[h].concat(c);const d=await Ge({htmlDocument:e,contentSelector:s,options:i,translations:a[f]});for(const[h,c]of Object.entries(d))o[h]=o[h].concat(c);return o}}}const se=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function Ye(r,n){n?n={...se,...n}:n=se;const t=ne(n);return t.dispatch(r),t.toString()}const Je=Object.freeze(["prototype","__proto__","constructor"]);function ne(r){let n="",t=new Map;const e=s=>{n+=s};return{toString(){return n},getContext(){return t},dispatch(s){return r.replacer&&(s=r.replacer(s)),this[s===null?"null":typeof s](s)},object(s){if(s&&typeof s.toJSON=="function")return this.object(s.toJSON());const i=Object.prototype.toString.call(s);let a="";const f=i.length;f<10?a="unknown:["+i+"]":a=i.slice(8,f-1),a=a.toLowerCase();let o=null;if((o=t.get(s))===void 0)t.set(s,t.size);else return this.dispatch("[CIRCULAR:"+o+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(s))return e("buffer:"),e(s.toString("utf8"));if(a!=="object"&&a!=="function"&&a!=="asyncfunction")this[a]?this[a](s):r.ignoreUnknown||this.unkown(s,a);else{let u=Object.keys(s);r.unorderedObjects&&(u=u.sort());let d=[];r.respectType!==!1&&!ie(s)&&(d=Je),r.excludeKeys&&(u=u.filter(c=>!r.excludeKeys(c)),d=d.filter(c=>!r.excludeKeys(c))),e("object:"+(u.length+d.length)+":");const h=c=>{this.dispatch(c),e(":"),r.excludeValues||this.dispatch(s[c]),e(",")};for(const c of u)h(c);for(const c of d)h(c)}},array(s,i){if(i=i===void 0?r.unorderedArrays!==!1:i,e("array:"+s.length+":"),!i||s.length<=1){for(const o of s)this.dispatch(o);return}const a=new Map,f=s.map(o=>{const u=ne(r);u.dispatch(o);for(const[d,h]of u.getContext())a.set(d,h);return u.toString()});return t=a,f.sort(),this.array(f,!1)},date(s){return e("date:"+s.toJSON())},symbol(s){return e("symbol:"+s.toString())},unkown(s,i){if(e(i),!!s&&(e(":"),s&&typeof s.entries=="function"))return this.array(Array.from(s.entries()),!0)},error(s){return e("error:"+s.toString())},boolean(s){return e("bool:"+s)},string(s){e("string:"+s.length+":"),e(s)},function(s){e("fn:"),ie(s)?this.dispatch("[native]"):this.dispatch(s.toString()),r.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(s.name)),r.respectFunctionProperties&&this.object(s)},number(s){return e("number:"+s)},xml(s){return e("xml:"+s.toString())},null(){return e("Null")},undefined(){return e("Undefined")},regexp(s){return e("regex:"+s.toString())},uint8array(s){return e("uint8array:"),this.dispatch(Array.prototype.slice.call(s))},uint8clampedarray(s){return e("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(s))},int8array(s){return e("int8array:"),this.dispatch(Array.prototype.slice.call(s))},uint16array(s){return e("uint16array:"),this.dispatch(Array.prototype.slice.call(s))},int16array(s){return e("int16array:"),this.dispatch(Array.prototype.slice.call(s))},uint32array(s){return e("uint32array:"),this.dispatch(Array.prototype.slice.call(s))},int32array(s){return e("int32array:"),this.dispatch(Array.prototype.slice.call(s))},float32array(s){return e("float32array:"),this.dispatch(Array.prototype.slice.call(s))},float64array(s){return e("float64array:"),this.dispatch(Array.prototype.slice.call(s))},arraybuffer(s){return e("arraybuffer:"),this.dispatch(new Uint8Array(s))},url(s){return e("url:"+s.toString())},map(s){e("map:");const i=[...s];return this.array(i,r.unorderedSets!==!1)},set(s){e("set:");const i=[...s];return this.array(i,r.unorderedSets!==!1)},file(s){return e("file:"),this.dispatch([s.name,s.size,s.type,s.lastModfied])},blob(){if(r.ignoreUnknown)return e("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return e("domwindow")},bigint(s){return e("bigint:"+s.toString())},process(){return e("process")},timer(){return e("timer")},pipe(){return e("pipe")},tcp(){return e("tcp")},udp(){return e("udp")},tty(){return e("tty")},statwatcher(){return e("statwatcher")},securecontext(){return e("securecontext")},connection(){return e("connection")},zlib(){return e("zlib")},context(){return e("context")},nodescript(){return e("nodescript")},httpparser(){return e("httpparser")},dataview(){return e("dataview")},signal(){return e("signal")},fsevent(){return e("fsevent")},tlswrap(){return e("tlswrap")}}}const re="[native code] }",Ze=re.length;function ie(r){return typeof r!="function"?!1:Function.prototype.toString.call(r).slice(-Ze)===re}class R{constructor(n,t){n=this.words=n||[],this.sigBytes=t===void 0?n.length*4:t}toString(n){return(n||Xe).stringify(this)}concat(n){if(this.clamp(),this.sigBytes%4)for(let t=0;t<n.sigBytes;t++){const e=n.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=e<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<n.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=n.words[t>>>2];return this.sigBytes+=n.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new R([...this.words])}}const Xe={stringify(r){const n=[];for(let t=0;t<r.sigBytes;t++){const e=r.words[t>>>2]>>>24-t%4*8&255;n.push((e>>>4).toString(16),(e&15).toString(16))}return n.join("")}},Qe={stringify(r){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=[];for(let e=0;e<r.sigBytes;e+=3){const s=r.words[e>>>2]>>>24-e%4*8&255,i=r.words[e+1>>>2]>>>24-(e+1)%4*8&255,a=r.words[e+2>>>2]>>>24-(e+2)%4*8&255,f=s<<16|i<<8|a;for(let o=0;o<4&&e*8+o*6<r.sigBytes*8;o++)t.push(n.charAt(f>>>6*(3-o)&63))}return t.join("")}},et={parse(r){const n=r.length,t=[];for(let e=0;e<n;e++)t[e>>>2]|=(r.charCodeAt(e)&255)<<24-e%4*8;return new R(t,n)}},tt={parse(r){return et.parse(unescape(encodeURIComponent(r)))}};class st{constructor(){this._data=new R,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=512/32}reset(){this._data=new R,this._nDataBytes=0}_append(n){typeof n=="string"&&(n=tt.parse(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes}_doProcessBlock(n,t){}_process(n){let t,e=this._data.sigBytes/(this.blockSize*4);n?e=Math.ceil(e):e=Math.max((e|0)-this._minBufferSize,0);const s=e*this.blockSize,i=Math.min(s*4,this._data.sigBytes);if(s){for(let a=0;a<s;a+=this.blockSize)this._doProcessBlock(this._data.words,a);t=this._data.words.splice(0,s),this._data.sigBytes-=i}return new R(t,i)}}class nt extends st{update(n){return this._append(n),this._process(),this}finalize(n){n&&this._append(n)}}const oe=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],rt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],z=[];class it extends nt{constructor(){super(...arguments),this._hash=new R([...oe])}reset(){super.reset(),this._hash=new R([...oe])}_doProcessBlock(n,t){const e=this._hash.words;let s=e[0],i=e[1],a=e[2],f=e[3],o=e[4],u=e[5],d=e[6],h=e[7];for(let c=0;c<64;c++){if(c<16)z[c]=n[t+c]|0;else{const _=z[c-15],B=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,L=z[c-2],C=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;z[c]=B+z[c-7]+C+z[c-16]}const v=o&u^~o&d,p=s&i^s&a^i&a,A=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),S=(o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25),b=h+S+v+rt[c]+z[c],w=A+p;h=d,d=u,u=o,o=f+b|0,f=a,a=i,i=s,s=b+w|0}e[0]=e[0]+s|0,e[1]=e[1]+i|0,e[2]=e[2]+a|0,e[3]=e[3]+f|0,e[4]=e[4]+o|0,e[5]=e[5]+u|0,e[6]=e[6]+d|0,e[7]=e[7]+h|0}finalize(n){super.finalize(n);const t=this._nDataBytes*8,e=this._data.sigBytes*8;return this._data.words[e>>>5]|=128<<24-e%32,this._data.words[(e+64>>>9<<4)+14]=Math.floor(t/4294967296),this._data.words[(e+64>>>9<<4)+15]=t,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function ot(r){return new it().finalize(r).toString(Qe)}function at(r,n={}){const t=typeof r=="string"?r:Ye(r,n);return ot(t).slice(0,10)}function lt(...r){return`${Ie}${at([...r])}`}const ct={__name:"SeoRatingBubble",props:{rating:{type:String,required:!0}},setup(r){return{__sfc:!0,colorMap:{good:"green",ok:"orange",bad:"red"}}}};var ut=function(){var n=this,t=n._self._c,e=n._self._setupProxy;return t("div",{staticClass:"ksr-mt-[0.375em] ksr-h-[12px] ksr-w-[12px] ksr-rounded-full",style:{backgroundColor:`var(--color-${e.colorMap[n.rating]??"gray"}-600)`}},[t("span",{staticClass:"ksr-sr-only"},[n._v(n._s(n.rating))])])},dt=[],ft=P(ct,ut,dt);const ht=ft.exports,pt={__name:"SeoResultEntry",props:{result:{type:Object,required:!0},links:{type:Boolean,default:!0}},setup(r){const n=r,t=E(),e=T(()=>{const i=n.result.text.replace(/!$/,".");return n.links?i:s(i)});function s(i){return new DOMParser().parseFromString(i,"text/html").body.textContent||""}return{__sfc:!0,props:n,panel:t,parseText:e,stripTags:s,SeoRatingBubble:ht}}};var gt=function(){var n=this,t=n._self._c,e=n._self._setupProxy;return t("div",{staticClass:"ksr-flex ksr-items-start ksr-gap-2"},[t(e.SeoRatingBubble,{staticClass:"ksr-mx-1 ksr-shrink-0",attrs:{rating:n.result.rating}}),t("div",[t("div",{domProps:{innerHTML:n._s(e.parseText)}}),n.result.details?t("details",[t("summary",[n._v(n._s(e.panel.t("johannschopplich.seo-audit.issues")))]),t("div",{staticClass:"ksr-mb-1 ksr-rounded-[var(--rounded)] ksr-bg-[var(--color-border)] ksr-py-0.5",domProps:{innerHTML:n._s(n.result.details.text)}})]):n._e()])],1)},mt=[],yt=P(pt,gt,mt);const vt=yt.exports,ae={...be},bt=Object.assign({inheritAttrs:!1},{__name:"SeoAudit",props:ae,setup(r){const n=r,t=E(),e=K(),s=Y(),i=ze(),{generateReport:a}=Ve(),{openLicenseModal:f,assertActivationIntegrity:o}=Ae({label:"Kirby SEO Audit",apiNamespace:"__seo-audit__"}),u=lt(t.view.path);let d;const h=y(),c=y(),v=y(),p=y(),A=y(),S=y(),b=y(),w=y(),_=y(),B=y(),L=y(),C=y(),le=y(!1),G=y(!1),ce=y(),M=y(),W=T(()=>s.getters["content/values"]()),ue=T(()=>c.value||W.value[v.value]||""),de=T(()=>{if(!p.value&&!A.value)return[];const g=p.value||W.value[A.value];return Array.isArray(g)?g:typeof g=="string"?g.split(",").map(k=>k.trim()):[]});ve(()=>t.language.code,()=>{V()}),V(!0);const{format:wt}=new Intl.DateTimeFormat(t.translation.code.replace("_","-"),{dateStyle:"short",timeStyle:"short"});async function V(g=!1){const{load:k}=me(),m=await k({parent:n.parent,name:n.name});if(g){if(h.value=fe(m.label)||t.t("johannschopplich.seo-audit.label"),v.value=m.keyphraseField,A.value=m.synonymsField,S.value=m.assessments,b.value=m.contentSelector,w.value=m.links,_.value=m.persisted,B.value=Oe.indexOf(m.config.logLevel??m.logLevel),L.value=m.config,C.value=m.license,Be(m.assets),_.value){const D=JSON.parse(localStorage.getItem(u));D&&(M.value=D)}le.value=!0,o({component:ce,licenseStatus:C.value})}c.value=m.keyphrase,p.value=m.synonyms,d=(await e.get(t.view.path,{select:"previewUrl"})).previewUrl}function fe(g){return!g||typeof g=="string"?g:g[t.translation.code]??Object.values(g)[0]}async function xt(){if(!d){t.notification.error(t.t("johannschopplich.seo-audit.error.missingPreviewUrl"));return}const g=d;t.isLoading=!0,G.value=!0;try{const k=await pe(g),{htmlDocument:m,locale:$,title:D,description:Lt}=await We(k),F=await a(m,b.value,{assessments:S.value,url:g,title:D,description:Lt,langCulture:$,keyword:ue.value,synonyms:de.value});for(const ge of Object.keys(F))F[ge]=he(F[ge]);M.value={result:F,timestamp:Date.now()},_.value&&localStorage.setItem(u,JSON.stringify(M.value))}catch(k){console.error(k),t.notification.error(t.t("johannschopplich.seo-audit.analyze.error"))}t.isLoading=!1,G.value=!1,t.notification.success({icon:"check",message:t.t("johannschopplich.seo-audit.analyze.success")})}function he(g){return g.toSorted((k,m)=>k.rating==="feedback"?-1:m.rating==="feedback"?1:k.score<m.score?-1:1)}async function pe(g){if(location.origin===new URL(g).origin){const $=await fetch(g);return $.ok||i.warn(`Response status code ${$.status} for URL ${g} is an indication that the error page is being analyzed.`),await $.text()}const{code:k,html:m}=await e.post("__seo-audit__/proxy",{url:g});return k!==200&&i.warn(`Response status code ${k} for URL ${g} is an indication that the error page is being analyzed.`),m}async function Rt(){const{isRegistered:g}=await f();g&&(C.value="active")}return{__sfc:!0,propsDefinition:ae,props:n,panel:t,api:e,store:s,logger:i,generateReport:a,openLicenseModal:f,assertActivationIntegrity:o,storageKey:u,previewUrl:d,label:h,keyphrase:c,keyphraseField:v,synonyms:p,synonymsField:A,assessments:S,contentSelector:b,links:w,persisted:_,logLevel:B,config:L,license:C,isInitialized:le,isGenerating:G,licenseButtonGroup:ce,report:M,currentContent:W,resolvedKeyphrase:ue,resolvedSynonyms:de,format:wt,updateSectionData:V,t:fe,analyze:xt,sortResults:he,fetchHtml:pe,handleRegistration:Rt,SeoResultEntry:vt}}});var _t=function(){var n=this,t=n._self._c,e=n._self._setupProxy;return e.isInitialized?t("k-section",{attrs:{label:e.label}},[e.license!=="active"?t("k-button-group",{ref:"licenseButtonGroup",attrs:{slot:"options",layout:"collapsed"},slot:"options"},[t("k-button",{attrs:{theme:"love",variant:"filled",size:"xs",link:"https://kirbyseo.com/buy",target:"_blank",text:e.panel.t("johannschopplich.seo-audit.license.buy")}}),t("k-button",{attrs:{theme:"love",variant:"filled",size:"xs",icon:"key",text:e.panel.t("johannschopplich.seo-audit.license.activate")},on:{click:function(s){return e.handleRegistration()}}})],1):n._e(),t("div",{staticClass:"ksr-space-y-4"},[t("k-button-group",{attrs:{layout:"collapsed"}},[t("k-button",{attrs:{icon:e.isGenerating?"loader":"seo-audit-analyze",text:e.panel.t("johannschopplich.seo-audit.analyze"),variant:"filled",size:"sm",theme:"positive",disabled:e.isGenerating},on:{click:function(s){return e.analyze()}}})],1),e.report?t("div",[t("k-box",{class:[e.isGenerating&&"ksr-cusor-wait ksr-pointer-events-none ksr-animate-pulse"],staticStyle:{"--link-color":"var(--color-text)"},attrs:{theme:"passive"}},[t("k-text",{staticClass:"ksr-space-y-4",class:[e.isGenerating&&"ksr-opacity-50"]},[e.report.result.seo.length>0?t("div",n._l(e.report.result.seo,function(s,i){return t("div",{key:i},[t(e.SeoResultEntry,{attrs:{result:s,links:e.links}})],1)}),0):n._e(),e.report.result.readability.length>0?t("div",[t("k-label",{staticClass:"ksr-mb-1",style:{color:"var(--color-text)"}},[n._v(" "+n._s(e.panel.t("johannschopplich.seo-audit.readability"))+" ")]),n._l(e.report.result.readability,function(s,i){return t("div",{key:i},[t(e.SeoResultEntry,{attrs:{result:s,links:e.links}})],1)})],2):n._e()])],1),t("k-box",{staticClass:"ksr-border-transparent",attrs:{theme:"empty",icon:"clock"}},[n._v(" "+n._s(e.format(e.report.timestamp))+" ")])],1):n._e()],1)],1):n._e()},kt=[],St=P(bt,_t,kt);const At=St.exports;window.panel.plugin("johannschopplich/seo-audit",{sections:{"seo-audit":At},icons:{"seo-audit-analyze":'<path d="M8 3a7 7 0 0 0 0 14h1.07a7.06 7.06 0 0 1 0-2H8A5 5 0 0 1 8 5h8a5 5 0 0 1 4.9 6a7.021 7.021 0 0 1 1.426 2A7 7 0 0 0 16 3zm8 10a3 3 0 1 0 0 6a3 3 0 0 0 0-6m-5 3a5 5 0 1 1 9.172 2.757l2.535 2.536l-1.414 1.414l-2.536-2.535A5 5 0 0 1 11 16" />'}})})();
